<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>临渊羡鱼的个人技术博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="技术博客">
<meta property="og:type" content="website">
<meta property="og:title" content="临渊羡鱼的个人技术博客">
<meta property="og:url" content="https://harrison258.github.io/index.html">
<meta property="og:site_name" content="临渊羡鱼的个人技术博客">
<meta property="og:description" content="技术博客">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="版权归侯仕平所有，并提供技术支持！未经授权，不得商用！">
<meta property="article:tag" content="技术博客">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="临渊羡鱼的个人技术博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 4.2.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">临渊羡鱼的个人技术博客</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">仅供交流和学习用，勿商用！</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">首页</a>
        
          <a class="main-nav-link" href="/archives">全部条目</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://harrison258.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-01_Yogo项目开发（PC端电商网站）" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/02/24/01_Yogo%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%EF%BC%88PC%E7%AB%AF%E7%94%B5%E5%95%86%E7%BD%91%E7%AB%99%EF%BC%89/" class="article-date">
  <time datetime="2020-02-23T17:07:11.816Z" itemprop="datePublished">2020-02-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/02/24/01_Yogo%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%EF%BC%88PC%E7%AB%AF%E7%94%B5%E5%95%86%E7%BD%91%E7%AB%99%EF%BC%89/">01_Yogo项目开发（PC端电商网站）</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id><a href="#" class="headerlink" title></a></h1><h3 id="1、软件安装"><a href="#1、软件安装" class="headerlink" title="1、软件安装"></a>1、软件安装</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Webstorm  前端开发IDE</span><br><span class="line">VS Code  前端开发IDE</span><br><span class="line">Atom  前端开发IDE</span><br><span class="line">HBuilder 前端开发IDE</span><br><span class="line">飞秋   局域网聊天工具</span><br><span class="line">PS 2015CC  方便切图</span><br><span class="line">福昕阅读器2017 PDF文档查看软件</span><br><span class="line">MS Visio 制作流程图</span><br><span class="line">Postman  测试后台接口</span><br><span class="line">Navicat MySQL可视操作界面</span><br><span class="line">XMind 思维导图</span><br></pre></td></tr></table></figure>

<h3 id="2、软件开发公司组成成员"><a href="#2、软件开发公司组成成员" class="headerlink" title="2、软件开发公司组成成员"></a>2、软件开发公司组成成员</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1)市场部</span><br><span class="line">2)开发部 产品经理(了解客户需求，并形成需求文档，制作原型图（草图）) UI工程师(把原型图转换为UI图) 前端</span><br><span class="line">工程师(所UI图转换为代码) 后台工程师（为前端提供数据和逻辑处理，以及网站安全处理等） 测试工程序师(对前端</span><br><span class="line">和后台完成的项目进行多平台、多设备等测试)</span><br><span class="line">3)售后</span><br></pre></td></tr></table></figure>

<h3 id="3、安装svn"><a href="#3、安装svn" class="headerlink" title="3、安装svn"></a>3、安装svn</h3><p>SVN：版本控制，用于局域网进行小组项目管理。</p>
<p>组长安装服务端，管理项目。</p>
<p>小组组长将仓库的地址、帐号和密码一般以电子邮件的方式发给小组其他成员。</p>
<p>小组其他成员安装SVN客户端，安装完成后，在要下载的目录下右键，选择检出。</p>
<p>每位成员每天上班前必须重新检出文件，下班前或某些页面或部分内容完成后就提交到仓库。</p>
<h3 id="4、搭建Yoga项目环境"><a href="#4、搭建Yoga项目环境" class="headerlink" title="4、搭建Yoga项目环境"></a>4、搭建Yoga项目环境</h3><p>1）安装node.js   <a href="http://nodejs.cn/download/" target="_blank" rel="noopener">http://nodejs.cn/download/</a><br>2）安装git<br>3）安装淘宝镜像cnpm  <a href="http://npm.taobao.org/" target="_blank" rel="noopener">http://npm.taobao.org/</a></p>
<p>​    说明：安装node.js后，会自带一个包管理器叫npm，但是用它时慢且容易丢包，因为它镜像的是国外的网站，可以使用国内的淘宝镜像cnpm。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g cnpm --registry&#x3D;https:&#x2F;&#x2F;registry.npm.taobao.org</span><br></pre></td></tr></table></figure>

<p>4）也可以安装yarn替代npm/cnpm，它的速度更快，安全性更高。</p>
<p>​    <a href="https://yarn.bootcss.com/" target="_blank" rel="noopener">https://yarn.bootcss.com/</a>    </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm i yarn -g 或：$ npm install yarn --global</span><br></pre></td></tr></table></figure>

<p>5）全局安装express-generator(生成器:用它生成项目) <a href="http://www.expressjs.com.cn/" target="_blank" rel="noopener">http://www.expressjs.com.cn/</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i express-generator -g</span><br></pre></td></tr></table></figure>

<p>6）生成项目</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">express -e yoga</span><br></pre></td></tr></table></figure>

<p>7）安装mysql</p>
<p>方法一：修改package.json(配置文件)</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">"dependencies": &#123;</span><br><span class="line">  "cookie-parser": "~1.4.3",</span><br><span class="line">  "debug": "~2.6.9",</span><br><span class="line">  "ejs": "~2.5.7",</span><br><span class="line">  "express": "~4.16.0",</span><br><span class="line">  "mysql":"*",</span><br><span class="line">  "http-errors": "~1.6.2",</span><br><span class="line">  "morgan": "~1.9.0"</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>方法二：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm i mysql -S  或 $ npm i mysql --save-dev</span><br></pre></td></tr></table></figure>

<p>8）安装依赖包</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ cd yoga</span><br><span class="line">$ npm i   或 cnpm i 或 yarn</span><br></pre></td></tr></table></figure>

<p>9）设置端口号</p>
<p>在app.js的倒数第二行添加：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">app.listen(<span class="number">80</span>,<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'服务器已启动！'</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>项目上线必须只能是80端口，开发时可以设成其它端口。</p>
<p>10）启动项目</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node app</span><br></pre></td></tr></table></figure>

<p>11）项目组长负责搭建项目环境和创建一些公共文件夹。</p>
<p>12）引入reset.css文件（目的：因为浏览器标准不一样，引入它是为了统一样式）</p>
<p><a href="https://meyerweb.com/eric/tools/css/reset/" target="_blank" rel="noopener">https://meyerweb.com/eric/tools/css/reset/</a></p>
<p>13）css哪些属性可以被继承</p>
<p><a href="https://www.cnblogs.com/thislbq/p/5882105.html" target="_blank" rel="noopener">https://www.cnblogs.com/thislbq/p/5882105.html</a></p>
<p>14）创建公共样式文件public.css或common.css。</p>
<h3 id="5、公共html代码抽离"><a href="#5、公共html代码抽离" class="headerlink" title="5、公共html代码抽离"></a>5、公共html代码抽离</h3><p>1）先写好html代码</p>
<p>2）将这部分代码复制到一个空白的JS文件中(<a href="https://www.jb51.net/article/49480.htm)。" target="_blank" rel="noopener">https://www.jb51.net/article/49480.htm)。</a></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> txt = <span class="string">'&lt;header&gt;\n'</span> +</span><br><span class="line">    <span class="string">'    &lt;ul class="menu"&gt;\n'</span> +</span><br><span class="line">    <span class="string">'        &lt;li&gt;&lt;a href="#"&gt;menu1&lt;/a&gt;\n'</span> +</span><br><span class="line">    <span class="string">'            &lt;ul class="submenu"&gt;\n'</span> +</span><br><span class="line">    <span class="string">'                &lt;li&gt;&lt;a href="#"&gt;submen&lt;/a&gt;&lt;/li&gt;\n'</span> +</span><br><span class="line">    <span class="string">'                &lt;li&gt;&lt;a href="#"&gt;submen&lt;/a&gt;&lt;/li&gt;\n'</span> +</span><br><span class="line">    <span class="string">'                &lt;li&gt;&lt;a href="#"&gt;submen&lt;/a&gt;&lt;/li&gt;\n'</span> +</span><br><span class="line">    <span class="string">'                &lt;li&gt;&lt;a href="#"&gt;submen&lt;/a&gt;&lt;/li&gt;\n'</span> +</span><br><span class="line">    <span class="string">'                &lt;li&gt;&lt;a href="#"&gt;submen&lt;/a&gt;&lt;/li&gt;\n'</span> +</span><br><span class="line">    <span class="string">'                &lt;li&gt;&lt;a href="#"&gt;submen&lt;/a&gt;&lt;/li&gt;\n'</span> +</span><br><span class="line">    <span class="string">'                &lt;li&gt;&lt;a href="#"&gt;submen&lt;/a&gt;&lt;/li&gt;\n'</span> +</span><br><span class="line">    <span class="string">'                &lt;li&gt;&lt;a href="#"&gt;submen&lt;/a&gt;&lt;/li&gt;\n'</span> +</span><br><span class="line">    <span class="string">'            &lt;/ul&gt;\n'</span> +</span><br><span class="line">    <span class="string">'      ......</span></span><br><span class="line"><span class="string">    '</span>    &lt;<span class="regexp">/ul&gt;\n' +</span></span><br><span class="line"><span class="regexp">    '&lt;/</span>header&gt;<span class="string">';</span></span><br><span class="line"><span class="string">document.write(txt);</span></span><br></pre></td></tr></table></figure>

<p>3）在需求引入这部分代码的地方引入</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/header.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="6、在每个html文件的head部分添加"><a href="#6、在每个html文件的head部分添加" class="headerlink" title="6、在每个html文件的head部分添加"></a>6、在每个html文件的head部分添加</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"keywords"</span> <span class="attr">content</span>=<span class="string">""</span> /&gt;</span>  设置关键字</span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"description"</span> <span class="attr">content</span>=<span class="string">""</span> /&gt;</span>  设置项目描述</span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"IE=edge,chrome=1"</span> /&gt;</span>如果用IE打开网站，默认用edge打开该网站</span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"renderer"</span> <span class="attr">content</span>=<span class="string">"webkit"</span> /&gt;</span>  国内大多数浏览器都是双核的，优先采用webkit渲染。</span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"shortcut icon"</span> <span class="attr">href</span>=<span class="string">"https://img.alicdn.com/tps/i3/T1OjaVFl4dXXa.JOZB-114-114.png"</span> <span class="attr">type</span>=<span class="string">"image/png"</span> /&gt;</span> 添加网站小图标</span><br></pre></td></tr></table></figure>

<h3 id="7、浏览器内核"><a href="#7、浏览器内核" class="headerlink" title="7、浏览器内核"></a>7、浏览器内核</h3><p>参考网站：<a href="https://baike.baidu.com/item/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%86%85%E6%A0%B8/10602413?fr=aladdin" target="_blank" rel="noopener">https://baike.baidu.com/item/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%86%85%E6%A0%B8/10602413?fr=aladdin</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Trident(IE内核)  -ms-</span><br><span class="line">Gecko(Firefox内核) -moz-</span><br><span class="line">Presto(Opera前内核) (已废弃)</span><br><span class="line">Opera现已改用Google Chrome的Blink内核 -o-</span><br><span class="line">Webkit(Safari内核,Chrome内核原型,开源):它是苹果公司自己的内核，也是苹果的Safari浏览器使用的内核 </span><br><span class="line">-webkit-</span><br><span class="line">注意：大多数CSS3必须要写兼容。</span><br></pre></td></tr></table></figure>

<h3 id="8、开发方式：MPA-多页面开发-SPA-单页面开发"><a href="#8、开发方式：MPA-多页面开发-SPA-单页面开发" class="headerlink" title="8、开发方式：MPA(多页面开发)     SPA(单页面开发)"></a>8、开发方式：MPA(多页面开发)     SPA(单页面开发)</h3><h3 id="9、开启本地服务器"><a href="#9、开启本地服务器" class="headerlink" title="9、开启本地服务器"></a>9、开启本地服务器</h3><p>1）安装（如果没安装node.js，要先安装）</p>
<p>​    npm i http-server -g</p>
<p>2）启动服务</p>
<p>​    进入要启动的项目目录中，输入：</p>
<p>​    http-server -p 80</p>
<h3 id="10、阿里矢量图标库（https-www-iconfont-cn-）。"><a href="#10、阿里矢量图标库（https-www-iconfont-cn-）。" class="headerlink" title="10、阿里矢量图标库（https://www.iconfont.cn/）。"></a>10、阿里矢量图标库（<a href="https://www.iconfont.cn/）。" target="_blank" rel="noopener">https://www.iconfont.cn/）。</a></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">1）创建项目</span><br><span class="line">2）添加图标到购物车</span><br><span class="line">3）把购物车中的图标添加到项目</span><br><span class="line">4）下载项目文件</span><br><span class="line">5）从下载的文件中把字体文件放入到当前项目fonts目录中,把iconfont.css放入在css目录中，注意要修改路径</span><br><span class="line">6）使用图标</span><br><span class="line">	&lt;span class&#x3D;&quot;iconfon&quot;&gt;&amp;#xe7c1;&lt;&#x2F;span&gt;</span><br><span class="line">    &lt;span class&#x3D;&quot;iconfont iconicon_phone&quot;&gt;&lt;&#x2F;span&gt;</span><br></pre></td></tr></table></figure>

<h3 id="11、HTML实体转义字符"><a href="#11、HTML实体转义字符" class="headerlink" title="11、HTML实体转义字符"></a>11、HTML实体转义字符</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">1）参考网站：</span><br><span class="line">	https:&#x2F;&#x2F;blog.csdn.net&#x2F;chb_1_2&#x2F;article&#x2F;details&#x2F;80728732</span><br><span class="line">	http:&#x2F;&#x2F;tool.oschina.net&#x2F;commons?type&#x3D;2</span><br><span class="line">2）HTML实体转义常用符号：    </span><br><span class="line">	&gt;     &gt;</span><br><span class="line">	&lt;     &lt;</span><br><span class="line">	&amp;copy;   ©</span><br><span class="line">	&amp;times;  ×</span><br><span class="line">	&amp;divide; ÷</span><br><span class="line">	&amp;#189;   ½</span><br><span class="line">	&amp;laquo;  «</span><br><span class="line">	&amp;raquo;  »</span><br></pre></td></tr></table></figure>

<h3 id="12、CDN加速器"><a href="#12、CDN加速器" class="headerlink" title="12、CDN加速器"></a>12、CDN加速器</h3><p>版本：2.6.10-12325  2为主版本号，6为次版本号，10为修正版本号,12325为补丁</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:&#x2F;&#x2F;www.bootcdn.cn&#x2F;</span><br></pre></td></tr></table></figure>

<h3 id="13、图片懒加载"><a href="#13、图片懒加载" class="headerlink" title="13、图片懒加载"></a>13、图片懒加载</h3><h4 id="13-1-什么是懒加载"><a href="#13-1-什么是懒加载" class="headerlink" title="13.1 什么是懒加载"></a>13.1 什么是懒加载</h4><p>懒加载其实就是延迟加载，是一种对网页性能优化的方式，比如当访问一个页面的时候，优先显示可视区域的图片而不一次性加载所有图片，当需要显示的时候再发送图片请求，避免打开网页时加载过多资源。</p>
<h4 id="13-2-什么时候用懒加载（使用场景）"><a href="#13-2-什么时候用懒加载（使用场景）" class="headerlink" title="13.2 什么时候用懒加载（使用场景）"></a>13.2 什么时候用懒加载（使用场景）</h4><p>当页面中需要一次性载入很多图片的时候，往往都是需要用懒加载的。</p>
<h4 id="13-3-懒加载原理"><a href="#13-3-懒加载原理" class="headerlink" title="13.3 懒加载原理"></a>13.3 懒加载原理</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">我们都知道HTML中的&lt;img&gt;标签是代表文档中的一个图像，&lt;img&gt;标签有一个属性是src，用来表示图像的URL，当这个属性的值不为空时，浏览器就会根据这个值发送请求。如果没有src属性，就不会发送请求。</span><br><span class="line">我们可以利用一下这点，先不设置&#96;src&#96;，需要的时候再设置。</span><br><span class="line">我们先不给&lt;img&gt;设置&#96;src&#96;，把图片真正的URL放在另一个属性&#96;data-src&#96;中，在需要的时候也就是图片进入可视区域的之前，将URL取出放到&#96;src&#96;中。</span><br></pre></td></tr></table></figure>

<h4 id="13-4-使用方法"><a href="#13-4-使用方法" class="headerlink" title="13.4 使用方法"></a>13.4 使用方法</h4><ol>
<li>引用jquery和jquery.lazyload.js到你的页面</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"jquery.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"jquery.lazyload.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol>
<li>你必须改变图片的标签。图像的地址必须放在<code>data-original</code>属性上。给懒加载图像一个特定的class（例如:lazy）。这样你可以很容易地进行图像插件捆绑。代码如下：</li>
</ol>
<p>　　HTML：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">"lazy"</span> <span class="attr">alt</span>=<span class="string">""</span> <span class="attr">width</span>=<span class="string">"640"</span> <span class="attr">height</span>=<span class="string">"480"</span> <span class="attr">data-original</span>=<span class="string">"img/img01.jpg"</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<p>　　js：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    $(<span class="string">"img.lazy"</span>).lazyload();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>　　这将使所有 class 为 <code>lazy</code> 的图片将被延迟加载。</p>
<h4 id="13-5-设置临界点"><a href="#13-5-设置临界点" class="headerlink" title="13.5 设置临界点"></a>13.5 设置临界点</h4><p>默认情况下图片会出现在屏幕时加载. 如果你想提前加载图片, 可以设置<code>threshold</code>选项, 设置 threshold 为 200 令图片在距离屏幕 200 像素时提前加载。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">"img.lazy"</span>).lazyload(&#123;</span><br><span class="line">    threshold : <span class="number">200</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="13-6-设置事件来触发加载"><a href="#13-6-设置事件来触发加载" class="headerlink" title="13.6 设置事件来触发加载"></a>13.6 设置事件来触发加载</h4><p>　　你可以使用jQuery事件，例如<code>click</code>和<code>mouseover</code>。也可以使用自定义事件，如<code>sporty</code>、<code>foobar</code>默认情况下是要等到用户向下滚动并且图像出现在视口中时。</p>
<p>　　只有当用户点击它们才加载图片：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">"img.lazy"</span>).lazyload(&#123;</span><br><span class="line">    event : <span class="string">"click"</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="13-7-使用特效"><a href="#13-7-使用特效" class="headerlink" title="13.7 使用特效"></a>13.7 使用特效</h4><p>　　默认情况下，插件等待图像完全加载并调用<code>show()</code>。你可以使用任何你想要的效果。下面的代码使用<code>fadeIn</code>（淡入效果）。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">"img.lazy"</span>).lazyload(&#123;</span><br><span class="line">    effect : <span class="string">"fadeIn"</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="13-8-参数设置"><a href="#13-8-参数设置" class="headerlink" title="13.8 参数设置"></a>13.8 参数设置</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">"img.lazy"</span>).lazyload(&#123;</span><br><span class="line">  placeholder : <span class="string">"img/grey.gif"</span>, <span class="comment">//用图片提前占位</span></span><br><span class="line">    <span class="comment">// placeholder,值为某一图片路径.此图片用来占据将要加载的图片的位置,待图片加载时,占位图则会隐藏</span></span><br><span class="line">  effect: <span class="string">"fadeIn"</span>, <span class="comment">// 载入使用何种效果</span></span><br><span class="line">    <span class="comment">// effect(特效),值有show(直接显示),fadeIn(淡入),slideDown(下拉)等,常用fadeIn</span></span><br><span class="line">  threshold: <span class="number">200</span>, <span class="comment">// 提前开始加载</span></span><br><span class="line">    <span class="comment">// threshold,值为数字,代表页面高度.如设置为200,表示滚动条在离目标位置还有200的高度时就开始加载图片,可以做到不让用户察觉</span></span><br><span class="line">  event: <span class="string">'click'</span>,  <span class="comment">// 事件触发时才加载</span></span><br><span class="line">    <span class="comment">// event,值有click(点击),mouseover(鼠标划过),sporty(运动的),foobar(…).可以实现鼠标莫过或点击图片才开始加载,后两个值未测试…</span></span><br><span class="line">  container: $(<span class="string">"#container"</span>),  <span class="comment">// 对某容器中的图片实现效果</span></span><br><span class="line">    <span class="comment">// container,值为某容器.lazyload默认在拉动浏览器滚动条时生效,这个参数可以让你在拉动某DIV的滚动条时依次加载其中的图片</span></span><br><span class="line">  failurelimit : <span class="number">10</span> <span class="comment">// 图片排序混乱时</span></span><br><span class="line">     <span class="comment">// failurelimit,值为数字.lazyload默认在找到第一张不在可见区域里的图片时则不再继续加载,但当HTML容器混乱的时候可能出现可见区域内图片并没加载出来的情况,failurelimit意在加载N张可见区域外的图片,以避免出现这个问题.</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><img src="/2020/02/24/01_Yogo%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%EF%BC%88PC%E7%AB%AF%E7%94%B5%E5%95%86%E7%BD%91%E7%AB%99%EF%BC%89/lazy.png" alt="img"></p>
<h4 id="13-9-另附JavaScript原生实现"><a href="#13-9-另附JavaScript原生实现" class="headerlink" title="13.9 另附JavaScript原生实现"></a>13.9 另附JavaScript原生实现</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 图片懒加载类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LazyLoad</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(el) &#123;</span><br><span class="line">        <span class="keyword">this</span>.imglist = <span class="built_in">Array</span>.from(<span class="built_in">document</span>.querySelectorAll(el)); <span class="comment">// 需使用懒加载的图片集合</span></span><br><span class="line">        <span class="keyword">this</span>.init(); <span class="comment">// 初始化</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 判断是否该图片是否可以加载</span></span><br><span class="line">    canILoad() &#123;</span><br><span class="line">        <span class="keyword">let</span> imglist = <span class="keyword">this</span>.imglist;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = imglist.length; i--;) &#123;</span><br><span class="line">            <span class="comment">// 缩写，相当于if true</span></span><br><span class="line">            <span class="keyword">this</span>.getBound(imglist[i]) &amp;&amp; <span class="keyword">this</span>.loadImage(imglist[i], i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 获取图片与窗口的信息</span></span><br><span class="line">    getBound(el) &#123;</span><br><span class="line">        <span class="keyword">let</span> bound = el.getBoundingClientRect();</span><br><span class="line">        <span class="keyword">let</span> clientHeight = <span class="built_in">window</span>.innerHeight;</span><br><span class="line">        <span class="comment">// 图片距离顶部的距离 &lt;= 浏览器可视化的高度，从而推算出是否需要加载</span></span><br><span class="line">        <span class="keyword">return</span> bound.top &lt;= clientHeight - <span class="number">100</span>; <span class="comment">// -100是为了看到效果，您也可以去掉</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 加载图片</span></span><br><span class="line">    loadImage(el, index) &#123;</span><br><span class="line">        <span class="comment">// 获取之前设置好的data-original值</span></span><br><span class="line">        <span class="keyword">let</span> src = el.getAttribute(<span class="string">'data-original'</span>);</span><br><span class="line">        <span class="comment">// 赋值到src，从而请求资源</span></span><br><span class="line">        el.src = src;</span><br><span class="line">        <span class="comment">// 避免重复判断，已经确定加载的图片应当从imglist移除</span></span><br><span class="line">        <span class="keyword">this</span>.imglist.splice(index, <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 当浏览器滚动的时候，继续判断</span></span><br><span class="line">    bindEvent() &#123;</span><br><span class="line">        <span class="built_in">window</span>.addEventListener(<span class="string">'scroll'</span>, () =&gt; &#123;</span><br><span class="line">            <span class="keyword">this</span>.imglist.length &amp;&amp; <span class="keyword">this</span>.canILoad();</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 初始化</span></span><br><span class="line">    init() &#123;</span><br><span class="line">        <span class="keyword">this</span>.canILoad();</span><br><span class="line">        <span class="keyword">this</span>.bindEvent();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 实例化对象，参数则是需要使用懒加载的图片类名</span></span><br><span class="line"><span class="keyword">const</span> lazy = <span class="keyword">new</span> LazyLoad(<span class="string">'.lazyload'</span>)</span><br></pre></td></tr></table></figure>

<p> 完整代码参照：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>图片懒加载<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">        body &#123;</span><br><span class="line">            text-align: center;</span><br><span class="line">        &#125;</span><br><span class="line">        img &#123;</span><br><span class="line">            width: 100%;</span><br><span class="line">            max-width: 300px;</span><br><span class="line">            height: 200px;</span><br><span class="line">            margin-bottom: 0px;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="css">        <span class="selector-class">.lazyload</span> &#123;</span></span><br><span class="line">        　　display: none;</span><br><span class="line">　　　　&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">"lazyload"</span> <span class="attr">data-original</span>=<span class="string">"https://media3.giphy.com/media/k5GuJn7VslbpGQqHUB/200w.webp"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">"lazyload"</span> <span class="attr">data-original</span>=<span class="string">"https://media1.giphy.com/media/2A7yoKf2B87kotTApZ/200w.webp"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">"lazyload"</span> <span class="attr">data-original</span>=<span class="string">"https://media2.giphy.com/media/3h1rwFW1PpLxD9xLUR/200w.webp"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">"lazyload"</span> <span class="attr">data-original</span>=<span class="string">"https://media0.giphy.com/media/igHgY3xzYxmRcxwZBs/200w.webp"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">"lazyload"</span> <span class="attr">data-original</span>=<span class="string">"https://media0.giphy.com/media/69v5dFsLtzdpaFZz2N/200w.webp"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">"lazyload"</span> <span class="attr">data-original</span>=<span class="string">"https://media3.giphy.com/media/k5GuJn7VslbpGQqHUB/200w.webp"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">"lazyload"</span> <span class="attr">data-original</span>=<span class="string">"https://media1.giphy.com/media/2A7yoKf2B87kotTApZ/200w.webp"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">"lazyload"</span> <span class="attr">data-original</span>=<span class="string">"https://media2.giphy.com/media/3h1rwFW1PpLxD9xLUR/200w.webp"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">"lazyload"</span> <span class="attr">data-original</span>=<span class="string">"https://media0.giphy.com/media/igHgY3xzYxmRcxwZBs/200w.webp"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">"lazyload"</span> <span class="attr">data-original</span>=<span class="string">"https://media0.giphy.com/media/69v5dFsLtzdpaFZz2N/200w.webp"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">   <span class="comment">// 图片懒加载类</span></span></span><br><span class="line"><span class="actionscript">   <span class="class"><span class="keyword">class</span> <span class="title">LazyLoad</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">       <span class="keyword">constructor</span>(el) &#123;</span></span><br><span class="line"><span class="javascript">           <span class="keyword">this</span>.imglist = <span class="built_in">Array</span>.from(<span class="built_in">document</span>.querySelectorAll(el)); <span class="comment">// 需使用懒加载的图片集合</span></span></span><br><span class="line"><span class="actionscript">           <span class="keyword">this</span>.init(); <span class="comment">// 初始化</span></span></span><br><span class="line">       &#125;</span><br><span class="line"><span class="actionscript">       <span class="comment">// 判断是否该图片是否可以加载</span></span></span><br><span class="line">       canILoad() &#123;</span><br><span class="line"><span class="javascript">           <span class="keyword">let</span> imglist = <span class="keyword">this</span>.imglist;</span></span><br><span class="line"><span class="javascript">           <span class="keyword">for</span> (<span class="keyword">let</span> i = imglist.length; i--;) &#123;</span></span><br><span class="line"><span class="actionscript">               <span class="comment">// 缩写，相当于if true</span></span></span><br><span class="line"><span class="actionscript">               <span class="keyword">this</span>.getBound(imglist[i]) &amp;&amp; <span class="keyword">this</span>.loadImage(imglist[i], i);</span></span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line"><span class="actionscript">       <span class="comment">// 获取图片与窗口的信息</span></span></span><br><span class="line">       getBound(el) &#123;</span><br><span class="line"><span class="javascript">           <span class="keyword">let</span> bound = el.getBoundingClientRect();</span></span><br><span class="line"><span class="javascript">           <span class="keyword">let</span> clientHeight = <span class="built_in">window</span>.innerHeight;</span></span><br><span class="line"><span class="actionscript">           <span class="comment">// 图片距离顶部的距离 &lt;= 浏览器可视化的高度，从而推算出是否需要加载</span></span></span><br><span class="line"><span class="actionscript">           <span class="keyword">return</span> bound.top &lt;= clientHeight - <span class="number">100</span>; <span class="comment">// -100是为了看到效果，您也可以去掉</span></span></span><br><span class="line">       &#125;</span><br><span class="line"><span class="actionscript">       <span class="comment">// 加载图片</span></span></span><br><span class="line">       loadImage(el, index) &#123;</span><br><span class="line"><span class="actionscript">           <span class="comment">// 获取之前设置好的data-original值</span></span></span><br><span class="line"><span class="javascript">           <span class="keyword">let</span> src = el.getAttribute(<span class="string">'data-original'</span>);</span></span><br><span class="line"><span class="actionscript">           <span class="comment">// 赋值到src，从而请求资源</span></span></span><br><span class="line">           el.src = src;</span><br><span class="line"><span class="actionscript">           <span class="comment">// 避免重复判断，已经确定加载的图片应当从imglist移除</span></span></span><br><span class="line"><span class="actionscript">           <span class="keyword">this</span>.imglist.splice(index, <span class="number">1</span>);</span></span><br><span class="line">       &#125;</span><br><span class="line"><span class="actionscript">       <span class="comment">// 当浏览器滚动的时候，继续判断</span></span></span><br><span class="line">       bindEvent() &#123;</span><br><span class="line"><span class="javascript">           <span class="built_in">window</span>.addEventListener(<span class="string">'scroll'</span>, () =&gt; &#123;</span></span><br><span class="line"><span class="actionscript">               <span class="keyword">this</span>.imglist.length &amp;&amp; <span class="keyword">this</span>.canILoad();</span></span><br><span class="line">           &#125;);</span><br><span class="line">       &#125;</span><br><span class="line"><span class="actionscript">       <span class="comment">// 初始化</span></span></span><br><span class="line">       init() &#123;</span><br><span class="line"><span class="actionscript">           <span class="keyword">this</span>.canILoad();</span></span><br><span class="line"><span class="actionscript">           <span class="keyword">this</span>.bindEvent();</span></span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line"><span class="actionscript">   <span class="comment">// 实例化对象，参数则是需要使用懒加载的图片类名</span></span></span><br><span class="line"><span class="actionscript">   <span class="keyword">const</span> lazy = <span class="keyword">new</span> LazyLoad(<span class="string">'.lazyload'</span>);</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="14、data-用户自定义属性"><a href="#14、data-用户自定义属性" class="headerlink" title="14、data-*:用户自定义属性"></a>14、data-*:用户自定义属性</h3><h3 id="15、动画插件animate-css-WoW-js"><a href="#15、动画插件animate-css-WoW-js" class="headerlink" title="15、动画插件animate.css+WoW.js"></a>15、动画插件animate.css+WoW.js</h3><h4 id="animate-css"><a href="#animate-css" class="headerlink" title="animate.css"></a>animate.css</h4><p>参考网站：<a href="https://daneden.github.io/animate.css/" target="_blank" rel="noopener">https://daneden.github.io/animate.css/</a></p>
<p>代码示例：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">"https://cdn.bootcss.com/animate.css/3.7.0/animate.min.css"</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container animated bounceInDown"</span>&gt;</span></span><br><span class="line">        童鞋们好！</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="wow-js"><a href="#wow-js" class="headerlink" title="wow.js"></a>wow.js</h4><p>参考网站：<a href="https://www.delac.io/wow/" target="_blank" rel="noopener">https://www.delac.io/wow/</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">data-wow-duration: 动画持续时间</span><br><span class="line">data-wow-delay: 动画延时加载</span><br><span class="line">data-wow-offset: 动画离浏览器底多少距离开始实施动画</span><br><span class="line">data-wow-iteration: 动画重复的次数</span><br></pre></td></tr></table></figure>

<p>代码示例：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">section</span> <span class="attr">class</span>=<span class="string">"wow slideInLeft"</span> <span class="attr">data-wow-duration</span>=<span class="string">"2s"</span> <span class="attr">data-wow-delay</span>=<span class="string">"5s"</span>&gt;</span><span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">section</span> <span class="attr">class</span>=<span class="string">"wow slideInRight"</span> <span class="attr">data-wow-offset</span>=<span class="string">"10"</span>  <span class="attr">data-wow-iteration</span>=<span class="string">"10"</span>&gt;</span><span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="16、动态加载菜单项（Node-js操作JSON文件）"><a href="#16、动态加载菜单项（Node-js操作JSON文件）" class="headerlink" title="16、动态加载菜单项（Node.js操作JSON文件）"></a>16、动态加载菜单项（Node.js操作JSON文件）</h3><h4 id="16-1-方法一（加载JSON文件实现）"><a href="#16-1-方法一（加载JSON文件实现）" class="headerlink" title="16.1 方法一（加载JSON文件实现）"></a>16.1 方法一（加载JSON文件实现）</h4><h5 id="16-1-1-数据如下（menu-json-："><a href="#16-1-1-数据如下（menu-json-：" class="headerlink" title="16.1.1 数据如下（menu.json)："></a>16.1.1 数据如下（menu.json)：</h5><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">"menu"</span>:<span class="string">"Home"</span>,</span><br><span class="line">    <span class="attr">"submenu"</span>:[<span class="string">"Yogo studion"</span>,<span class="string">"Fitness club"</span>,<span class="string">"Gym"</span>,<span class="string">"Health club"</span>,<span class="string">"Coach"</span>,<span class="string">"Dance"</span>]</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">"menu"</span>:<span class="string">"Pages"</span>,</span><br><span class="line">    <span class="attr">"submenu"</span>:[<span class="string">"About Us"</span>,<span class="string">"Services"</span>,<span class="string">"Reservations"</span>,<span class="string">"Pricing Tables"</span>,<span class="string">"Our Team"</span>,<span class="string">"Content Elements"</span>]</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">"menu"</span>:<span class="string">"Events"</span>,</span><br><span class="line">    <span class="attr">"submenu"</span>:[<span class="string">"All Events"</span>,<span class="string">"Events One"</span>,<span class="string">"Events Two"</span>,<span class="string">"Events Three"</span>,<span class="string">"Events Four"</span>,<span class="string">"Single Event"</span>]</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">"menu"</span>:<span class="string">"PORTFOLIO"</span>,</span><br><span class="line">    <span class="attr">"submenu"</span>:[<span class="string">"Column 3 Cols"</span>,<span class="string">"Column 4 Cols Wide"</span>,<span class="string">"4 Cols Masonry"</span>,<span class="string">"Four Columns"</span>,<span class="string">"Gallery"</span>]</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">"menu"</span>:<span class="string">"BLOG"</span>,</span><br><span class="line">    <span class="attr">"submenu"</span>:[<span class="string">"About Us"</span>,<span class="string">"Services"</span>,<span class="string">"Reservations"</span>,<span class="string">"Pricing Tables"</span>,<span class="string">"Our Team"</span>,<span class="string">"Content Elements"</span>]</span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>　　<strong>注意：</strong></p>
<p>　　　（1）单独的JSON文件中不能出现注释语句；</p>
<p>　　　（2）键和值必须用双引号引起来，不能用单引号，如果值是数值或逻辑类型，就不加引号；</p>
<p>　　　（3）不要加多余的标点符号。</p>
<h5 id="16-1-2-后台路由配置和JSON文件读取："><a href="#16-1-2-后台路由配置和JSON文件读取：" class="headerlink" title="16.1.2 后台路由配置和JSON文件读取："></a>16.1.2 后台路由配置和JSON文件读取：</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line"></span><br><span class="line">router.get(<span class="string">'/menu'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> file = <span class="string">'./public/data/menu.json'</span>;</span><br><span class="line">    <span class="comment">//读取json文件</span></span><br><span class="line">    fs.readFile(file, <span class="string">'utf-8'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (err) &#123;</span><br><span class="line">            res.send(&#123;<span class="attr">error_code</span>:<span class="number">1</span>&#125;);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            res.send(&#123;</span><br><span class="line">                error_code:<span class="number">0</span>,</span><br><span class="line">                data:<span class="built_in">JSON</span>.parse(data)</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>在html文档中引入template.js。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/template.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="16-1-3-定义模板"><a href="#16-1-3-定义模板" class="headerlink" title="16.1.3 定义模板"></a>16.1.3 定义模板</h5><p>参考网站：<a href="http://www.jq22.com/jquery-info1097" target="_blank" rel="noopener">http://www.jq22.com/jquery-info1097</a></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">"menu"</span>&gt;</span></span><br><span class="line">    &#123;&#123; each data &#125;&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>&#123;&#123;$value.menu&#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"submenu"</span>&gt;</span></span><br><span class="line">            &#123;&#123; each $value.submenu &#125;&#125;</span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>&#123;&#123; $value &#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            &#123;&#123; /each &#125;&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    &#123;&#123; /each &#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>或：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">id</span>=<span class="string">"menu"</span> <span class="attr">type</span>=<span class="string">"text/html"</span>&gt;</span></span><br><span class="line"><span class="handlebars"><span class="xml">    </span><span class="template-variable">&#123;&#123; <span class="builtin-name">each</span> data &#125;&#125;</span></span></span><br><span class="line"><span class="handlebars"><span class="xml">    <span class="tag">&lt;<span class="name">li</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span></span><span class="template-variable">&#123;&#123; $value.menu &#125;&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span></span><br><span class="line"><span class="javascript">        &lt;ul <span class="class"><span class="keyword">class</span></span>=<span class="string">"submenu"</span>&gt;</span></span><br><span class="line"><span class="handlebars"><span class="xml">            </span><span class="template-variable">&#123;&#123; <span class="builtin-name">each</span> $value.submenu &#125;&#125;</span></span></span><br><span class="line"><span class="handlebars"><span class="xml">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span></span><span class="template-variable">&#123;&#123; $value&#125;&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">            </span><span class="template-variable">&#123;&#123; /<span class="builtin-name">each</span> &#125;&#125;</span></span></span><br><span class="line"><span class="handlebars"><span class="xml">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">    </span><span class="template-variable">&#123;&#123; /<span class="builtin-name">each</span> &#125;&#125;</span></span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="16-1-4-JS处理"><a href="#16-1-4-JS处理" class="headerlink" title="16.1.4 JS处理"></a>16.1.4 JS处理</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/template.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    $.ajax(&#123;</span></span><br><span class="line"><span class="actionscript">        url:<span class="string">'/menu'</span> </span></span><br><span class="line"><span class="actionscript">    &#125;).then(<span class="function"><span class="keyword">function</span> <span class="params">(rs)</span> </span>&#123;</span></span><br><span class="line">        if(!rs.error_data)&#123;</span><br><span class="line"><span class="actionscript">            <span class="keyword">var</span> html = template(<span class="string">'menu'</span>,rs);</span></span><br><span class="line"><span class="javascript">            $(<span class="string">'.menu'</span>).html(html)</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="16-2-方法二（MySQL数据库实现）"><a href="#16-2-方法二（MySQL数据库实现）" class="headerlink" title="16.2 方法二（MySQL数据库实现）"></a>16.2 方法二（MySQL数据库实现）</h4><h5 id="16-2-1-数据表（menu）"><a href="#16-2-1-数据表（menu）" class="headerlink" title="16.2.1 数据表（menu）"></a>16.2.1 数据表（menu）</h5><p>​    结构如下：</p>
<p><img src="/2020/02/24/01_Yogo%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%EF%BC%88PC%E7%AB%AF%E7%94%B5%E5%95%86%E7%BD%91%E7%AB%99%EF%BC%89/menu_structor.png" alt></p>
<p>​    表数据如下：</p>
<p><img src="/2020/02/24/01_Yogo%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%EF%BC%88PC%E7%AB%AF%E7%94%B5%E5%95%86%E7%BD%91%E7%AB%99%EF%BC%89/menu_data.png" alt="2"></p>
<h5 id="16-2-2-前端代码实现"><a href="#16-2-2-前端代码实现" class="headerlink" title="16.2.2 前端代码实现"></a>16.2.2 前端代码实现</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang&#x3D;&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset&#x3D;&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;&#x2F;title&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;header&gt;&lt;&#x2F;header&gt;</span><br><span class="line"></span><br><span class="line">    &lt;script id&#x3D;&quot;menu&quot; type&#x3D;&quot;text&#x2F;html&quot;&gt;</span><br><span class="line">        &lt;ul class&#x3D;&quot;menu&quot;&gt;</span><br><span class="line">            &lt;!--一级菜单--&gt;</span><br><span class="line">            &#123;&#123; each data as menus &#125;&#125;</span><br><span class="line">                &#123;&#123;if menus.submenu !&#x3D;&#x3D; null&#125;&#125;</span><br><span class="line">                    &lt;li&gt;&lt;a href&#x3D;&quot;javascript:&quot;&gt;&#123;&#123; menus.menu &#125;&#125;&lt;&#x2F;a&gt;</span><br><span class="line">                        &lt;ul class&#x3D;&quot;submenu&quot;&gt;</span><br><span class="line">                            &lt;!--二级菜单--&gt;</span><br><span class="line">                            &#123;&#123; each menus.submenu &#125;&#125;</span><br><span class="line">                            &lt;li&gt;&lt;a href&#x3D;&quot;html&#x2F;&#123;&#123;menus.menu&#125;&#125;&#x2F;&#123;&#123;menus.url[$index]&#125;&#125;&quot;&gt;&#123;&#123; $value &#125;&#125;&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;</span><br><span class="line">                            &#123;&#123; &#x2F;each &#125;&#125;</span><br><span class="line">                        &lt;&#x2F;ul&gt;</span><br><span class="line">                    &lt;&#x2F;li&gt;</span><br><span class="line">                &#123;&#123; else &#125;&#125;</span><br><span class="line">                    &lt;li&gt;&lt;a href&#x3D;&quot;html&#x2F;contacts&#x2F;&#123;&#123; menus.url[0] &#125;&#125;&quot;&gt;&#123;&#123; menus.menu &#125;&#125;&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;</span><br><span class="line">            &#123;&#123; &#x2F;if &#125;&#125;</span><br><span class="line">            &#123;&#123; &#x2F;each &#125;&#125;</span><br><span class="line">        &lt;&#x2F;ul&gt;</span><br><span class="line">    &lt;&#x2F;script&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;script src&#x3D;&quot;https:&#x2F;&#x2F;cdn.bootcss.com&#x2F;jquery&#x2F;3.4.1&#x2F;jquery.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">&lt;script src&#x3D;&quot;template.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    $.ajax(&#123;</span><br><span class="line">        url:&#39;http:&#x2F;&#x2F;47.105.51.229&#x2F;promenu&#39;</span><br><span class="line">    &#125;).then(res&#x3D;&gt;&#123;</span><br><span class="line">        console.log(res)</span><br><span class="line">        if(res.code &#x3D;&#x3D; &#39;0&#39;)&#123;</span><br><span class="line">            var txt &#x3D; template(&#39;menu&#39;,res);</span><br><span class="line">            $(&#39;header&#39;).html(txt);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>

<h5 id="16-2-3-后台代码实现"><a href="#16-2-3-后台代码实现" class="headerlink" title="16.2.3 后台代码实现"></a>16.2.3 后台代码实现</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">router.get(&#39;&#x2F;promenu&#39;,function(req,res)&#123;</span><br><span class="line">    conn.query(&#39;select * from menu&#39;,(err,rs)&#x3D;&gt;&#123;</span><br><span class="line">        if(!err)&#123;</span><br><span class="line">            rs.forEach(v&#x3D;&gt;&#123;</span><br><span class="line">                if(v.submenu !&#x3D;&#x3D; null)&#123;</span><br><span class="line">                   v.submenu &#x3D;v.submenu.split(&#39;,&#39;) </span><br><span class="line">                &#125;</span><br><span class="line">                if(v.url !&#x3D;&#x3D; null)&#123;</span><br><span class="line">                   v.url &#x3D;v.url.split(&#39;,&#39;) </span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">            res.send(&#123;</span><br><span class="line">                code:&#39;0&#39;,</span><br><span class="line">                data:rs</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">            res.send(&#123;</span><br><span class="line">                code:&#39;1&#39;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="17、正则表达式"><a href="#17、正则表达式" class="headerlink" title="17、正则表达式"></a>17、正则表达式</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">\	将下一个字符标记为一个特殊字符、或一个原义字符、或一个向后引用、或一个八进制转义符。例如，“n”匹配字符“n”。“\n”匹配一个换行符。串行“\\”匹配“\”而“\(”则匹配“(”。</span><br><span class="line">^	匹配输入字符串的开始位置。如果设置了RegExp对象的Multiline属性，^也匹配“\n”或“\r”之后的位置。</span><br><span class="line">$	匹配输入字符串的结束位置。如果设置了RegExp对象的Multiline属性，$也匹配“\n”或“\r”之前的位置。</span><br><span class="line">*	匹配前面的子表达式零次或多次。例如，zo*能匹配“z”以及“zoo”。*等价于&#123;0,&#125;。</span><br><span class="line">+	匹配前面的子表达式一次或多次。例如，“zo+”能匹配“zo”以及“zoo”，但不能匹配“z”。+等价于&#123;1,&#125;。</span><br><span class="line">?	匹配前面的子表达式零次或一次。例如，“do(es)?”可以匹配“does”或“does”中的“do”。?等价于&#123;0,1&#125;。</span><br><span class="line">&#123;n&#125;	n是一个非负整数。匹配确定的n次。例如，“o&#123;2&#125;”不能匹配“Bob”中的“o”，但是能匹配“food”中的两个o。</span><br><span class="line">&#123;n,&#125;	n是一个非负整数。至少匹配n次。例如，“o&#123;2,&#125;”不能匹配“Bob”中的“o”，但能匹配“foooood”中的所有o。“o&#123;1,&#125;”等价于“o+”。“o&#123;0,&#125;”则等价于“o*”。</span><br><span class="line">&#123;n,m&#125;	m和n均为非负整数，其中n&lt;&#x3D;m。最少匹配n次且最多匹配m次。例如，“o&#123;1,3&#125;”将匹配“fooooood”中的前三个o。“o&#123;0,1&#125;”等价于“o?”。请注意在逗号和两个数之间不能有空格。</span><br><span class="line">?	当该字符紧跟在任何一个其他限制符（*,+,?，&#123;n&#125;，&#123;n,&#125;，&#123;n,m&#125;）后面时，匹配模式是非贪婪的。非贪婪模式尽可能少的匹配所搜索的字符串，而默认的贪婪模式则尽可能多的匹配所搜索的字符串。例如，对于字符串“oooo”，“o+?”将匹配单个“o”，而“o+”将匹配所有“o”。</span><br><span class="line">.	匹配除“\n”之外的任何单个字符。要匹配包括“\n”在内的任何字符，请使用像“(.|\n)”的模式。</span><br><span class="line">(pattern)	匹配pattern并获取这一匹配。所获取的匹配可以从产生的Matches集合得到，在VBScript中使用SubMatches集合，在JScript中则使用$0…$9属性。要匹配圆括号字符，请使用“\(”或“\)”。</span><br><span class="line">(?:pattern)	匹配pattern但不获取匹配结果，也就是说这是一个非获取匹配，不进行存储供以后使用。这在使用或字符“(|)”来组合一个模式的各个部分是很有用。例如“industr(?:y|ies)”就是一个比“industry|industries”更简略的表达式。</span><br><span class="line">(?&#x3D;pattern)	正向肯定预查，在任何匹配pattern的字符串开始处匹配查找字符串。这是一个非获取匹配，也就是说，该匹配不需要获取供以后使用。例如，“Windows(?&#x3D;95|98|NT|2000)”能匹配“Windows2000”中的“Windows”，但不能匹配“Windows3.1”中的“Windows”。预查不消耗字符，也就是说，在一个匹配发生后，在最后一次匹配之后立即开始下一次匹配的搜索，而不是从包含预查的字符之后开始。</span><br><span class="line">(?!pattern)	正向否定预查，在任何不匹配pattern的字符串开始处匹配查找字符串。这是一个非获取匹配，也就是说，该匹配不需要获取供以后使用。例如“Windows(?!95|98|NT|2000)”能匹配“Windows3.1”中的“Windows”，但不能匹配“Windows2000”中的“Windows”。预查不消耗字符，也就是说，在一个匹配发生后，在最后一次匹配之后立即开始下一次匹配的搜索，而不是从包含预查的字符之后开始</span><br><span class="line">(?&lt;&#x3D;pattern)	反向肯定预查，与正向肯定预查类拟，只是方向相反。例如，“(?&lt;&#x3D;95|98|NT|2000)Windows”能匹配“2000Windows”中的“Windows”，但不能匹配“3.1Windows”中的“Windows”。</span><br><span class="line">(?&lt;!pattern)	反向否定预查，与正向否定预查类拟，只是方向相反。例如“(?&lt;!95|98|NT|2000)Windows”能匹配“3.1Windows”中的“Windows”，但不能匹配“2000Windows”中的“Windows”。</span><br><span class="line">x|y	匹配x或y。例如，“z|food”能匹配“z”或“food”。“(z|f)ood”则匹配“zood”或“food”。</span><br><span class="line">[xyz]	字符集合。匹配所包含的任意一个字符。例如，“[abc]”可以匹配“plain”中的“a”。</span><br><span class="line">[^xyz]	负值字符集合。匹配未包含的任意字符。例如，“[^abc]”可以匹配“plain”中的“p”。</span><br><span class="line">[a-z]	字符范围。匹配指定范围内的任意字符。例如，“[a-z]”可以匹配“a”到“z”范围内的任意小写字母字符。</span><br><span class="line">[^a-z]	负值字符范围。匹配任何不在指定范围内的任意字符。例如，“[^a-z]”可以匹配任何不在“a”到“z”范围内的任意字符。</span><br><span class="line">\b	匹配一个单词边界，也就是指单词和空格间的位置。例如，“er\b”可以匹配“never”中的“er”，但不能匹配“verb”中的“er”。</span><br><span class="line">\B	匹配非单词边界。“er\B”能匹配“verb”中的“er”，但不能匹配“never”中的“er”。</span><br><span class="line">\cx	匹配由x指明的控制字符。例如，\cM匹配一个Control-M或回车符。x的值必须为A-Z或a-z之一。否则，将c视为一个原义的“c”字符。</span><br><span class="line">\d	匹配一个数字字符。等价于[0-9]。</span><br><span class="line">\D	匹配一个非数字字符。等价于[^0-9]。</span><br><span class="line">\f	匹配一个换页符。等价于\x0c和\cL。</span><br><span class="line">\n	匹配一个换行符。等价于\x0a和\cJ。</span><br><span class="line">\r	匹配一个回车符。等价于\x0d和\cM。</span><br><span class="line">\s	匹配任何空白字符，包括空格、制表符、换页符等等。等价于[ \f\n\r\t\v]。</span><br><span class="line">\S	匹配任何非空白字符。等价于[^ \f\n\r\t\v]。</span><br><span class="line">\t	匹配一个制表符。等价于\x09和\cI。</span><br><span class="line">\v	匹配一个垂直制表符。等价于\x0b和\cK。</span><br><span class="line">\w	匹配包括下划线的任何单词字符。等价于“[A-Za-z0-9_]”。</span><br><span class="line">\W	匹配任何非单词字符。等价于“[^A-Za-z0-9_]”。</span><br><span class="line">\xn	匹配n，其中n为十六进制转义值。十六进制转义值必须为确定的两个数字长。例如，“\x41”匹配“A”。“\x041”则等价于“\x04&amp;1”。正则表达式中可以使用ASCII编码。.</span><br><span class="line">\num	匹配num，其中num是一个正整数。对所获取的匹配的引用。例如，“(.)\1”匹配两个连续的相同字符。</span><br><span class="line">\n	标识一个八进制转义值或一个向后引用。如果\n之前至少n个获取的子表达式，则n为向后引用。否则，如果n为八进制数字（0-7），则n为一个八进制转义值。</span><br><span class="line">\nm	标识一个八进制转义值或一个向后引用。如果\nm之前至少有nm个获得子表达式，则nm为向后引用。如果\nm之前至少有n个获取，则n为一个后跟文字m的向后引用。如果前面的条件都不满足，若n和m均为八进制数字（0-7），则\nm将匹配八进制转义值nm。</span><br><span class="line">\nml	如果n为八进制数字（0-3），且m和l均为八进制数字（0-7），则匹配八进制转义值nml。</span><br><span class="line">\un	匹配n，其中n是一个用四个十六进制数字表示的Unicode字符。例如，\u00A9匹配版权符号（©）。</span><br><span class="line">常用正则表达式</span><br><span class="line">用户名	&#x2F;^[A-Z][A-Za-z0-9_\-]&#123;3,16&#125;$&#x2F;   </span><br><span class="line">密码	&#x2F;^[a-z0-9_-]&#123;6,18&#125;$&#x2F;</span><br><span class="line">十六进制值	&#x2F;^#?([a-f0-9]&#123;6&#125;|[a-f0-9]&#123;3&#125;)$&#x2F;</span><br><span class="line">电子邮箱	&#x2F;^([a-z0-9_\.-]+)@([\da-z\.-]+)\.([a-z\.]&#123;2,6&#125;)$&#x2F;</span><br><span class="line">&#x2F;^[a-z\d]+(\.[a-z\d]+)*@([\da-z](.&#x2F;images&#x2F;-[\da-z])?)+(\.&#123;1,2&#125;[a-z]+)+$&#x2F;</span><br><span class="line">URL	&#x2F;^(https?:\&#x2F;\&#x2F;)?([\da-z\.-]+)\.([a-z\.]&#123;2,6&#125;)([\&#x2F;\w \.-]*)*\&#x2F;?$&#x2F;</span><br><span class="line">IP 地址	&#x2F;((2[0-4]\d|25[0-5]|[01]?\d\d?)\.)&#123;3&#125;(2[0-4]\d|25[0-5]|[01]?\d\d?)&#x2F;</span><br><span class="line">&#x2F;^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.)&#123;3&#125;(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$&#x2F;</span><br><span class="line">HTML 标签	&#x2F;^&lt;([a-z]+)([^&lt;]+)*(?:&gt;(.*)&lt;\&#x2F;\1&gt;|\s+\&#x2F;&gt;)$&#x2F;</span><br><span class="line">删除代码\\注释	(?&lt;!http:|\S)&#x2F;&#x2F;.*$</span><br><span class="line">Unicode编码中的汉字范围	&#x2F;^[\u2E80-\u9FFF]+$&#x2F;</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"account"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"account"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> input = <span class="built_in">document</span>.getElementsByTagName(<span class="string">'input'</span>)[<span class="number">0</span>];</span></span><br><span class="line"><span class="actionscript">    input.onblur = <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">         <span class="keyword">if</span>(!<span class="regexp">/^[^\u4e00-\u9fa5]&#123;3,&#125;$/</span>.test(<span class="built_in">document</span>.getElementsByTagName(<span class="string">'input'</span>)[<span class="number">0</span>].value))&#123;</span></span><br><span class="line"><span class="javascript">             <span class="built_in">document</span>.getElementsByClassName(<span class="string">'account'</span>)[<span class="number">0</span>].innerHTML = <span class="string">'您输入的帐号有误！'</span>;</span></span><br><span class="line">             input.focus();</span><br><span class="line">       &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="18、必应地图（微软提供的）"><a href="#18、必应地图（微软提供的）" class="headerlink" title="18、必应地图（微软提供的）"></a>18、必应地图（微软提供的）</h3><p>参考网站：</p>
<p>注册：<a href="https://www.cnblogs.com/aiyunyun/p/6292567.html?utm_source=itdadao&amp;utm_medium=referral" target="_blank" rel="noopener">https://www.cnblogs.com/aiyunyun/p/6292567.html?utm_source=itdadao&amp;utm_medium=referral</a></p>
<p>地图API：<a href="https://cn.bing.com/api/maps/sdkrelease/mapcontrol/isdk#SearchModule2" target="_blank" rel="noopener">https://cn.bing.com/api/maps/sdkrelease/mapcontrol/isdk#SearchModule2</a></p>
<p>代码参考：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>loadmapwithoptionsHTML<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">'Content-Type'</span> <span class="attr">content</span>=<span class="string">'text/html; charset=utf-8'</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">'text/css'</span>&gt;</span><span class="css"><span class="selector-tag">body</span>&#123;<span class="attribute">margin</span>:<span class="number">0</span>;<span class="attribute">padding</span>:<span class="number">0</span>;<span class="attribute">overflow</span>:hidden;<span class="attribute">font-family</span>:<span class="string">'Segoe UI'</span>,Helvetica,Arial,Sans-Serif&#125;</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">'myMap'</span> <span class="attr">style</span>=<span class="string">'width: 100vw; height: 100vh;'</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">'text/javascript'</span> <span class="attr">src</span>=<span class="string">'https://cn.bing.com/api/maps/mapcontrol?key=Au83-_DMxgCdCFb_LLlcRdRARu46QLEfTR-c6KS_EOG3OYQRw-v6Lyd1UGmnWDi6 &amp;callback=loadMapScenario'</span> <span class="attr">async</span> <span class="attr">defer</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">'text/javascript'</span>&gt;</span></span><br><span class="line"><span class="actionscript">    <span class="function"><span class="keyword">function</span> <span class="title">loadMapScenario</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> map = <span class="keyword">new</span> Microsoft.Maps.Map(<span class="built_in">document</span>.getElementById(<span class="string">'myMap'</span>), &#123;</span></span><br><span class="line"><span class="actionscript">            <span class="comment">/* No need to set credentials if already passed in URL */</span></span></span><br><span class="line"><span class="actionscript">            center: <span class="keyword">new</span> Microsoft.Maps.Location(<span class="number">51.50632</span>, <span class="number">-0.12714</span>),</span></span><br><span class="line">            mapTypeId: Microsoft.Maps.MapTypeId.aerial,</span><br><span class="line">            zoom: 10 &#125;);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>项目中参考代码：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">loadMapScenario</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> map = <span class="keyword">new</span> Microsoft.Maps.Map(<span class="built_in">document</span>.getElementById(<span class="string">'myMap'</span>), &#123;</span><br><span class="line">            center: <span class="keyword">new</span> Microsoft.Maps.Location(<span class="number">41.0907918018</span>, <span class="number">-73.9166539907</span>),</span><br><span class="line">            mapTypeId: Microsoft.Maps.MapTypeId.aerial,</span><br><span class="line">            zoom: <span class="number">12</span></span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="comment">/*自定义图钉*/</span></span><br><span class="line">        <span class="keyword">var</span> pushpin = <span class="keyword">new</span> Microsoft.Maps.Pushpin(map.getCenter(), &#123;</span><br><span class="line">            icon: <span class="string">'../../img/contacts/Contacts_04.png'</span>,</span><br><span class="line">            anchor: <span class="keyword">new</span> Microsoft.Maps.Point(<span class="number">12</span>, <span class="number">39</span>)</span><br><span class="line">        &#125;);</span><br><span class="line">        map.entities.push(pushpin);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h3 id="19、MySQL是一个个人关系数据库。"><a href="#19、MySQL是一个个人关系数据库。" class="headerlink" title="19、MySQL是一个个人关系数据库。"></a>19、MySQL是一个个人关系数据库。</h3><p>​    MySQl用的是SQL语言，SQL Server用的是T-SQL语言，Oracle用的是PL_SQL语言。</p>
<p>​    下载：<a href="https://dev.mysql.com/downloads/mysql/" target="_blank" rel="noopener">https://dev.mysql.com/downloads/mysql/</a></p>
<p>​    可视化操作界面软件</p>
<p>​    下载：<a href="https://www.navicat.com.cn/products#navicat" target="_blank" rel="noopener">https://www.navicat.com.cn/products#navicat</a></p>
<h4 id="1）启动-停止mysql服务。"><a href="#1）启动-停止mysql服务。" class="headerlink" title="1）启动/停止mysql服务。"></a>1）启动/停止mysql服务。</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">net start mysql</span><br><span class="line">net stop mysql</span><br></pre></td></tr></table></figure>

<h4 id="2）数据类型"><a href="#2）数据类型" class="headerlink" title="2）数据类型"></a>2）数据类型</h4><p>​    char：定长，</p>
<p>​    varchar：变长</p>
<p>​    字符型必须要给出具体长度，而数值型除decimal外，日期型，text等，不需要给出长度，系统会默认。</p>
<h4 id="3）数据库备份"><a href="#3）数据库备份" class="headerlink" title="3）数据库备份"></a>3）数据库备份</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">c:\&gt;mysqldump –u用户名 –p 数据库名&gt;文件名.sql</span><br><span class="line">c:\&gt;mysqldump –u用户名 –p 数据库名 数据表名&gt;文件名.sql</span><br></pre></td></tr></table></figure>

<h4 id="4）数据库恢复"><a href="#4）数据库恢复" class="headerlink" title="4）数据库恢复"></a>4）数据库恢复</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">先创建新的数据库</span><br><span class="line">c:\&gt;mysql -u用户名 –p 新数据库名 &lt; 文件名.sql</span><br></pre></td></tr></table></figure>

<p>​    注意：必须退出mysql的登录，回到盘符下再操作！！！</p>
<h4 id="5）表操作"><a href="#5）表操作" class="headerlink" title="5）表操作"></a>5）表操作</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">添加数据：</span><br><span class="line">	插入1行：insert into 表名(列名1,列名2....) values（表达式1，表达式2....)</span><br><span class="line">	如果插入1行数据用values，插入多行用value，因为响应时间不一样。									https:&#x2F;&#x2F;blog.csdn.net&#x2F;qq_26683009&#x2F;article&#x2F;details&#x2F;52526834</span><br><span class="line">	插入多行：insert into 表名(列名1,列名2....) value（表达式1，表达式2....),（表达式1，表达式2....),...... </span><br><span class="line">删除数据：</span><br><span class="line">	delete from 表名 [where &lt;条件&gt;]</span><br><span class="line">	trancate table 表名   不能加条件，将把指定的数据表中的数据全部删除，但结构仍在。</span><br><span class="line">更新数据：</span><br><span class="line">	update 表名 set 列名1 &#x3D; 表达式1[,列名2 &#x3D; 表达式2，......][where &lt;条件&gt;]</span><br><span class="line">数据查询：</span><br><span class="line">	select [distinct][*|列名表 [as[别名]]]</span><br><span class="line">	from 表名1 [as [别名]],表名2...</span><br><span class="line">	where &lt;条件&gt; （谓词:between...and,in,any,all,some....）（关系运算符：&gt;,&lt;,&gt;&#x3D;,&lt;&#x3D;,!&#x3D;,&lt;&gt;,&#x3D;）</span><br><span class="line">	group by 列名表</span><br><span class="line">	having &lt;分组条件&gt;  (分组条件通常是带集合函数(sum,avg,count,max,min...)的条件)</span><br><span class="line">	order by 列名1[asc|desc],列名2[asc|desc]  排序</span><br><span class="line">多表查询：</span><br><span class="line">	a.</span><br><span class="line">	select username,b.name,salary</span><br><span class="line">    from user a,work b</span><br><span class="line">    where a.name &#x3D; b.name</span><br><span class="line">    b.</span><br><span class="line">    select username,b.name,salary</span><br><span class="line">	from user a join work b on a.name &#x3D; b.name join checkon c on c.id &#x3D; b.id</span><br><span class="line">	</span><br><span class="line">创建视图（虚拟表：一般由单张或多张基表（物理表）派生出来的一张表，它依赖于原物理表）</span><br><span class="line">	create view v_user_work_chk as </span><br><span class="line">		select username,b.name,salary,checkinTime</span><br><span class="line">		from user a join work b on a.name &#x3D; b.name join checkon c on c.name &#x3D; b.&#96;name&#96;</span><br><span class="line"></span><br><span class="line">利用视图查询：		</span><br><span class="line">	select * from  v_user_work_chk 		</span><br><span class="line">删除视图：</span><br><span class="line">	drop view 视图名表</span><br></pre></td></tr></table></figure>

<h4 id="6）每张表必须要有主键，如果要将多张表连接起来，必须要设置外键。"><a href="#6）每张表必须要有主键，如果要将多张表连接起来，必须要设置外键。" class="headerlink" title="6）每张表必须要有主键，如果要将多张表连接起来，必须要设置外键。"></a>6）每张表必须要有主键，如果要将多张表连接起来，必须要设置外键。</h4><p>要先创建约束，然后再输入数据，如果有外键，一定是先输入主表的数据，再输入子表（外键所在表）的数据。</p>
<h4 id="7）添加外键命令"><a href="#7）添加外键命令" class="headerlink" title="7）添加外键命令"></a>7）添加外键命令</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table admin add foreign key(teamId) REFERENCES coach(teamId)</span><br></pre></td></tr></table></figure>

<h4 id="8）数据库连接及相关增删改查操作"><a href="#8）数据库连接及相关增删改查操作" class="headerlink" title="8）数据库连接及相关增删改查操作"></a>8）数据库连接及相关增删改查操作</h4><h5 id="I）查询"><a href="#I）查询" class="headerlink" title="I）查询"></a>I）查询</h5><p>a.conn.js</p>
<p>参考网站：<a href="https://github.com/mysqljs/mysql" target="_blank" rel="noopener">https://github.com/mysqljs/mysql</a></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1、引入mysql模块</span></span><br><span class="line"><span class="keyword">const</span> mysql = <span class="built_in">require</span>(<span class="string">'mysql'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2、创建数据库连接对象</span></span><br><span class="line"><span class="keyword">let</span> conn = mysql.createConnection(&#123;</span><br><span class="line">    host:<span class="string">'localhost'</span>,</span><br><span class="line">    user:<span class="string">'root'</span>,</span><br><span class="line">    password:<span class="string">'admin'</span>,</span><br><span class="line">    database:<span class="string">'yoga'</span></span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 3、抛出conn数据库连接对象conn</span></span><br><span class="line"><span class="built_in">module</span>.exports = conn;</span><br></pre></td></tr></table></figure>

<p>b.在index.js中引入conn.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> conn = <span class="built_in">require</span>(<span class="string">'../public/js/conn'</span>);</span><br></pre></td></tr></table></figure>

<p>c.在index.html中建立数据库连接</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">conn.connect(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'数据库连接成功！'</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>d.创建路由</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">router.get(<span class="string">'/coach'</span>,<span class="function"><span class="keyword">function</span> (<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">    conn.query(<span class="string">'select * from coach'</span>,<span class="function"><span class="keyword">function</span> (<span class="params">err, rs</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(!err)&#123;</span><br><span class="line">            res.send(&#123;</span><br><span class="line">                code:<span class="number">0</span>,</span><br><span class="line">                data:rs</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            res.send(&#123;</span><br><span class="line">                code:<span class="number">1</span></span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>e.书写html</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"coach"</span>&gt;</span><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>f.定义模板</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--coach info--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">"coach"</span>&gt;</span></span><br><span class="line">    &#123;&#123; each data &#125;&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"###"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"img/&#123;&#123; $value.coachPhoto &#125;&#125;"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; $value.coachName &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; $value.coachExp &#125;&#125; years of experience<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    &#123;&#123; /each &#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>g.前端发请，求并渲染模板</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$.ajax(&#123;</span><br><span class="line">    url:<span class="string">'/coach'</span></span><br><span class="line">&#125;).then(<span class="function"><span class="keyword">function</span> (<span class="params">rs</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(rs);</span><br><span class="line">    <span class="keyword">var</span> html = template(<span class="string">'coach'</span>,rs);</span><br><span class="line">    $(<span class="string">'.coach'</span>).html(html);</span><br><span class="line">&#125;,<span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;<span class="comment">//捕获异常</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'数据请求失败'</span>,error)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h5 id="II）添加"><a href="#II）添加" class="headerlink" title="II）添加"></a>II）添加</h5><p>a.html代码</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>注册<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">span</span><span class="selector-class">.usr</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">color</span>:<span class="selector-id">#f00</span>;</span></span><br><span class="line">            display: none;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">    帐号：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"account"</span> <span class="attr">maxlength</span>=<span class="string">"8"</span>&gt;</span> <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"usr"</span>&gt;</span>账号由字母、数字、下划线组成，6-8位<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">    密码：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">name</span>=<span class="string">"pwd"</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">class</span>=<span class="string">"register"</span> <span class="attr">value</span>=<span class="string">"注册"</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcss.com/jquery/1.10.2/jquery.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> objUsr = $(<span class="string">'input'</span>).eq(<span class="number">0</span>);</span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> objPwd = $(<span class="string">'input'</span>).eq(<span class="number">1</span>);</span></span><br><span class="line"><span class="javascript">    $(objUsr).blur(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">if</span>(<span class="regexp">/^\w&#123;6,8&#125;$/</span>.test($(<span class="string">'input'</span>).eq(<span class="number">0</span>).val()))&#123;</span></span><br><span class="line"><span class="javascript">            $(<span class="string">'span.usr'</span>).css(<span class="string">'display'</span>,<span class="string">'none'</span>);</span></span><br><span class="line"><span class="actionscript">        &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="javascript">            $(<span class="string">'span.usr'</span>).css(<span class="string">'display'</span>,<span class="string">'block'</span>);</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"><span class="javascript">    $(<span class="string">'.register'</span>).click(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="javascript">        $.ajax(&#123;</span></span><br><span class="line"><span class="actionscript">           <span class="comment">/* type:'post',*/</span></span></span><br><span class="line"><span class="actionscript">            url:<span class="string">'/reg'</span>,</span></span><br><span class="line">            /*data:&#123;</span><br><span class="line"><span class="javascript">                usr:$(<span class="string">'input'</span>).eq(<span class="number">0</span>).val(),</span></span><br><span class="line"><span class="javascript">                pwd:$(<span class="string">'input'</span>).eq(<span class="number">1</span>).val()</span></span><br><span class="line">            &#125;*/</span><br><span class="line"><span class="javascript">            data:$(<span class="string">'form'</span>).serialize()<span class="comment">//serialize序列化，它绑定的对象必须是form，表单组件必须有name属性</span></span></span><br><span class="line"><span class="javascript">        &#125;).then(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">if</span>(res == <span class="string">'success'</span>)&#123;</span></span><br><span class="line"><span class="actionscript">                alert(<span class="string">'注册成功！'</span>);</span></span><br><span class="line"><span class="actionscript">            &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="actionscript">                alert(<span class="string">'注册失败！'</span>);</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>b.后台代码</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//注册</span></span><br><span class="line">router.post(<span class="string">'/reg'</span>,<span class="function"><span class="keyword">function</span> (<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> usr = req.body.usr;<span class="comment">//get请求用req.query拿数据，post请求用req.body拿数据,/reg/:id 拿参数id的值用req.params.id</span></span><br><span class="line">    <span class="keyword">let</span> pwd = req.body.pwd;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 写法1：</span></span><br><span class="line"><span class="comment">    conn.query('insert into admin(username,password) values(?,?)',[usr,pwd],function (err, rs) &#123;</span></span><br><span class="line"><span class="comment">        if(err)&#123;</span></span><br><span class="line"><span class="comment">            res.send('error');</span></span><br><span class="line"><span class="comment">        &#125;else&#123;</span></span><br><span class="line"><span class="comment">            res.send('success');</span></span><br><span class="line"><span class="comment">        &#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    &#125;)*/</span></span><br><span class="line">    <span class="comment">/* 写法2 */</span></span><br><span class="line">    conn.query(<span class="string">`insert into admin(username,password) values('<span class="subst">$&#123;usr&#125;</span>','<span class="subst">$&#123;pwd&#125;</span>')`</span>,<span class="function"><span class="keyword">function</span> (<span class="params">err, rs</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(err)&#123;</span><br><span class="line">            res.send(<span class="string">'error'</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            res.send(<span class="string">'success'</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h5 id="III）删除"><a href="#III）删除" class="headerlink" title="III）删除"></a>III）删除</h5><p>a.html代码</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">class</span>=<span class="string">"coach"</span> <span class="attr">border</span>=<span class="string">"1"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>序号<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>姓名<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>性别<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>经验<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>照片<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>操作<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tbody</span>&gt;</span><span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>b.定义模板</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">"coach"</span>&gt;</span></span><br><span class="line">    &#123;&#123; each data &#125;&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span> <span class="attr">class</span>=<span class="string">"coach-no&#123;&#123;$index&#125;&#125;"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; $index + 1 &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; $value.coachName &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; $value.coachSex &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; $value.coachExp &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"img/&#123;&#123; $value.coachPhoto &#125;&#125;"</span> <span class="attr">alt</span>=<span class="string">"&#123;&#123; $value.coachName &#125;&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"###"</span>&gt;</span>编辑<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"javascript:void(0);"</span> <span class="attr">onclick</span>=<span class="string">"del(&#123;&#123; $index &#125;&#125;,&#123;&#123; $value.teamId &#125;&#125;)"</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    &#123;&#123; /each &#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>c.js代码</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">del</span>(<span class="params">index,tId</span>) </span>&#123;</span><br><span class="line">    $.ajax(&#123;</span><br><span class="line">        url:<span class="string">'/delCoach?teamId='</span>+tId</span><br><span class="line">    &#125;).then(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(res);</span><br><span class="line">        <span class="keyword">if</span>(res === <span class="string">'success'</span>)&#123;</span><br><span class="line">            <span class="comment">// getCoachInfo();</span></span><br><span class="line">            <span class="comment">//console.log($('.coach-no'+index));</span></span><br><span class="line">            $(<span class="string">'.coach-no'</span>+index).remove();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>d.后台代码</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">router.get(<span class="string">'/delCoach'</span>,<span class="function"><span class="keyword">function</span> (<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> tId = req.query.teamId;</span><br><span class="line">    <span class="comment">// console.log(tId)</span></span><br><span class="line">    conn.query(<span class="string">'delete from coach where teamId = ?'</span>,tId,<span class="function"><span class="keyword">function</span> (<span class="params">err, rs</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(err)&#123;</span><br><span class="line">            res.send(<span class="string">'error'</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            res.send(<span class="string">'success'</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h5 id="IV）修改"><a href="#IV）修改" class="headerlink" title="IV）修改"></a>IV）修改</h5><p>a.html代码</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">class</span>=<span class="string">"coach"</span> <span class="attr">border</span>=<span class="string">"1"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>序号<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>姓名<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>性别<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>经验<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>照片<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>操作<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tbody</span>&gt;</span><span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>b.定义模板</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">"coach"</span>&gt;</span></span><br><span class="line">    &#123;&#123; each data &#125;&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span> <span class="attr">class</span>=<span class="string">"coach-no&#123;&#123;$index&#125;&#125;"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; $index + 1 &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; $value.coachName &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; $value.coachSex &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; $value.coachExp &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"img/&#123;&#123; $value.coachPhoto &#125;&#125;"</span> <span class="attr">alt</span>=<span class="string">"&#123;&#123; $value.coachName &#125;&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"###"</span> <span class="attr">onclick</span>=<span class="string">"edit(&#123;&#123; $index &#125;&#125;,&#123;&#123; $value.teamId &#125;&#125;)"</span>&gt;</span>编辑<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"javascript:void(0);"</span> <span class="attr">onclick</span>=<span class="string">"del(&#123;&#123; $index &#125;&#125;,&#123;&#123; $value.teamId &#125;&#125;)"</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"###"</span> <span class="attr">class</span>=<span class="string">"cancel"</span>&gt;</span>取消<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"###"</span> <span class="attr">class</span>=<span class="string">"ok"</span>&gt;</span>确认<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    &#123;&#123; /each &#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>c.js代码</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">edit</span>(<span class="params">index, tId</span>) </span>&#123;</span><br><span class="line">    $(<span class="string">'.cancel'</span>).css(<span class="string">'display'</span>,<span class="string">'none'</span>);</span><br><span class="line">    $(<span class="string">'.ok'</span>).css(<span class="string">'display'</span>,<span class="string">'none'</span>);</span><br><span class="line">    $(<span class="string">'.cancel'</span>).eq(index).css(<span class="string">'display'</span>,<span class="string">'block'</span>);</span><br><span class="line">    $(<span class="string">'.ok'</span>).eq(index).css(<span class="string">'display'</span>,<span class="string">'block'</span>);</span><br><span class="line">    $(<span class="string">'.coach'</span>).find(<span class="string">'td'</span>).removeAttr(<span class="string">'contentEditAble'</span>);</span><br><span class="line">    $(<span class="string">'.coach-no'</span>+index).find(<span class="string">'td'</span>).attr(<span class="string">'contentEditAble'</span>,<span class="string">''</span>);</span><br><span class="line">    <span class="keyword">let</span> txt = [];</span><br><span class="line">    <span class="keyword">let</span> tdList = $(<span class="string">'.coach-no'</span>+index);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">1</span>;i&lt; tdList.find(<span class="string">'td'</span>).length - <span class="number">2</span>;i++)&#123;</span><br><span class="line">        txt.push(tdList.find(<span class="string">'td'</span>).eq(i).html())</span><br><span class="line">    &#125;</span><br><span class="line">    $(<span class="string">'.cancel'</span>).click(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">1</span>;i&lt; tdList.find(<span class="string">'td'</span>).length - <span class="number">2</span>;i++)&#123;</span><br><span class="line">            tdList.find(<span class="string">'td'</span>).eq(i).html(txt[i - <span class="number">1</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">        $(<span class="string">'.cancel'</span>).eq(index).css(<span class="string">'display'</span>,<span class="string">'none'</span>);</span><br><span class="line">        $(<span class="string">'.ok'</span>).eq(index).css(<span class="string">'display'</span>,<span class="string">'none'</span>);</span><br><span class="line">    &#125;)</span><br><span class="line">    $(<span class="string">'.ok'</span>).click(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">let</span> newTxt = [];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">1</span>;i&lt; tdList.find(<span class="string">'td'</span>).length - <span class="number">2</span>;i++)&#123;</span><br><span class="line">            newTxt.push(tdList.find(<span class="string">'td'</span>).eq(i).html())</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//console.log(newTxt)</span></span><br><span class="line">        $.ajax(&#123;</span><br><span class="line">            url:<span class="string">'/updateCoach'</span>,</span><br><span class="line">            data:&#123;</span><br><span class="line">                teamId:tId,</span><br><span class="line">                coachName:newTxt[<span class="number">0</span>],</span><br><span class="line">                coachSex:newTxt[<span class="number">1</span>],</span><br><span class="line">                coachExp:newTxt[<span class="number">2</span>],</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).then(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(res==<span class="string">'success'</span>)&#123;</span><br><span class="line">                alert(<span class="string">'数据修改成功！'</span>);</span><br><span class="line">                $(<span class="string">'.cancel'</span>).eq(index).css(<span class="string">'display'</span>,<span class="string">'none'</span>);</span><br><span class="line">                $(<span class="string">'.ok'</span>).eq(index).css(<span class="string">'display'</span>,<span class="string">'none'</span>);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                alert(<span class="string">'数据修改失败！'</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>d.后台代码</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">router.get(<span class="string">'/updateCoach'</span>,<span class="function"><span class="keyword">function</span> (<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> tId = req.query.teamId;</span><br><span class="line">    <span class="keyword">let</span> name = req.query.coachName;</span><br><span class="line">    <span class="keyword">let</span> sex = req.query.coachSex;</span><br><span class="line">    <span class="keyword">let</span> exp = req.query.coachExp;</span><br><span class="line">    <span class="comment">//console.log(tId,name,sex,exp)</span></span><br><span class="line">    conn.query(<span class="string">'update coach set coachName=?, coachSex=?,coachExp=? where teamId = ?'</span>,[name,sex,exp,tId],<span class="function"><span class="keyword">function</span> (<span class="params">err, rs</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(err)&#123;</span><br><span class="line">            res.send(<span class="string">'error'</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            res.send(<span class="string">'success'</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h5 id="V）分页"><a href="#V）分页" class="headerlink" title="V）分页"></a>V）分页</h5><p>a.前端代码</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">        li &#123;</span><br><span class="line">            list-style-type: none;</span><br><span class="line">            float: left;</span><br><span class="line">            width: 30px;</span><br><span class="line">            text-align: center;</span><br><span class="line">            cursor: pointer;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">        <span class="selector-class">.active</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">background-color</span>: <span class="selector-id">#999</span>;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">color</span>: <span class="selector-id">#fff</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"goods"</span>&gt;</span><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"pages"</span>&gt;</span><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcss.com/jquery/1.10.2/jquery.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    $.ajax(&#123;</span></span><br><span class="line"><span class="actionscript">        url: <span class="string">'/coach/0'</span></span></span><br><span class="line"><span class="javascript">    &#125;).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(res);</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">var</span> pageSize = <span class="number">2</span>;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="built_in">Math</span>.ceil(res.len / pageSize); i++) &#123;<span class="comment">//7</span></span></span><br><span class="line"><span class="javascript">            $(<span class="string">'ul.pages'</span>).append(<span class="string">'&lt;li&gt;'</span> + (i + <span class="number">1</span>) + <span class="string">'&lt;/li&gt;'</span>);</span></span><br><span class="line">        &#125;</span><br><span class="line"><span class="javascript">        $(<span class="string">'.pages li:eq(0)'</span>).addClass(<span class="string">'active'</span>);</span></span><br><span class="line">    &#125;);</span><br><span class="line"><span class="javascript">    $(<span class="string">'.pages'</span>).on(<span class="string">'click'</span>, <span class="string">'li'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;<span class="comment">//bind/live/delegate/on  事件委托</span></span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log($(<span class="keyword">this</span>).html());</span></span><br><span class="line"><span class="javascript">        $(<span class="string">'.pages li'</span>).removeClass(<span class="string">'active'</span>).eq($(<span class="keyword">this</span>).index()).addClass(<span class="string">'active'</span>);</span></span><br><span class="line"><span class="javascript">        $.ajax(&#123;</span></span><br><span class="line"><span class="javascript">            url: <span class="string">'/coach/'</span> + $(<span class="keyword">this</span>).html()</span></span><br><span class="line"><span class="javascript">        &#125;).then(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(res);</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>b.后台代码</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">router.get(<span class="string">'/coach/:id'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> pageNo = req.params.id &gt; <span class="number">0</span> ? req.params.id : <span class="number">1</span>;</span><br><span class="line">    <span class="comment">//console.log(pageNo);</span></span><br><span class="line">    <span class="keyword">let</span> rs = &#123;&#125;;</span><br><span class="line">    conn.query(<span class="string">'select * from coach'</span>, (err, result) =&gt; &#123;</span><br><span class="line">        rs.len = result.length;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">//console.log(rs);</span></span><br><span class="line">    <span class="keyword">let</span> pageSize = <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">let</span> skip = (pageNo - <span class="number">1</span>) * pageSize;</span><br><span class="line">    conn.query(<span class="string">'select * from coach limit '</span> + skip + <span class="string">','</span> + pageSize, <span class="function"><span class="keyword">function</span> (<span class="params">err, results</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!err) &#123;</span><br><span class="line">            rs.code = <span class="number">0</span>;</span><br><span class="line">            rs.data = results;</span><br><span class="line">            res.send(rs);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            res.send(&#123;</span><br><span class="line">                code: <span class="number">1</span></span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="https://harrison258.github.io/2020/02/24/01_Yogo%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%EF%BC%88PC%E7%AB%AF%E7%94%B5%E5%95%86%E7%BD%91%E7%AB%99%EF%BC%89/" data-id="ck71fnuul0000m0ib0v6xholr" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-05_在线影评(小程序原生开发)" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/02/24/05_%E5%9C%A8%E7%BA%BF%E5%BD%B1%E8%AF%84(%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91)/" class="article-date">
  <time datetime="2020-02-23T16:58:37.320Z" itemprop="datePublished">2020-02-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/02/24/05_%E5%9C%A8%E7%BA%BF%E5%BD%B1%E8%AF%84(%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91)/">05_在线影评(小程序原生开发)</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id><a href="#" class="headerlink" title></a></h2><h4 id="0-前言"><a href="#0-前言" class="headerlink" title="0.前言"></a>0.前言</h4><p>工作必备技能：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1）用vue.js开发PC端和移动端项目（组件化、模块化、自动化）</span><br><span class="line">2）微信小程序</span><br></pre></td></tr></table></figure>

<p>面试必须掌握的核心内容：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">HTML5新特性和CSS3新特性</span><br><span class="line">浏览器兼容处理</span><br><span class="line">ES5.1&#x2F;ES6</span><br><span class="line">AMD CMD CommonJS</span><br><span class="line">Node.js&#x2F;PHP&#x2F;Java (必须具备一门后台语言)</span><br><span class="line">Vue.js</span><br><span class="line">微信小程序</span><br><span class="line">线上项目</span><br></pre></td></tr></table></figure>

<h4 id="1-微信小程序"><a href="#1-微信小程序" class="headerlink" title="1.微信小程序"></a>1.微信小程序</h4><h5 id="1-1-小程序特点"><a href="#1-1-小程序特点" class="headerlink" title="1.1 小程序特点"></a>1.1 小程序特点</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1）用完即走，不需要下载。</span><br><span class="line">2）它的使用环境为微信。微信小程序不能在浏览器中打开，它有自己的开发环境和测试环境。</span><br></pre></td></tr></table></figure>

<p>下载开发微信小程序的IDE。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:&#x2F;&#x2F;developers.weixin.qq.com&#x2F;miniprogram&#x2F;dev&#x2F;devtools&#x2F;devtools.html</span><br></pre></td></tr></table></figure>

<h5 id="1-2-注册微信小程序帐号"><a href="#1-2-注册微信小程序帐号" class="headerlink" title="1.2 注册微信小程序帐号"></a>1.2 注册微信小程序帐号</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">如果没有小程序帐号，可以使用测试号，但测试号不能上线。</span><br></pre></td></tr></table></figure>

<p>注册网址：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:&#x2F;&#x2F;mp.weixin.qq.com&#x2F;</span><br></pre></td></tr></table></figure>

<p>注意：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">微信小程序和公众号不能使用同一个帐号（即需要两个或多个邮箱，不一定是QQ邮箱），登录小程序时，公众号会自动下线。</span><br></pre></td></tr></table></figure>

<h4 id="3-创建项目"><a href="#3-创建项目" class="headerlink" title="3.创建项目"></a>3.创建项目</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">略过。</span><br></pre></td></tr></table></figure>

<h4 id="4-基础知识"><a href="#4-基础知识" class="headerlink" title="4.基础知识"></a>4.基础知识</h4><h5 id="4-1-小程序与普通网页开发的区别"><a href="#4-1-小程序与普通网页开发的区别" class="headerlink" title="4.1 小程序与普通网页开发的区别"></a>4.1 小程序与普通网页开发的区别</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">小程序的主要开发语言是 JavaScript ，小程序的开发同普通的网页开发相比有很大的相似性。对于前端开发者而言，从网页开发迁移到小程序的开发成本并不高，但是二者还是有些许区别的。</span><br><span class="line"></span><br><span class="line">网页开发渲染线程和脚本线程是互斥的，这也是为什么长时间的脚本运行可能会导致页面失去响应，而在小程序中，二者是分开的，分别运行在不同的线程中。网页开发者可以使用到各种浏览器暴露出来的 DOM API，进行 DOM 选中和操作。小程序的逻辑层和渲染层是分开的，逻辑层运行在 JSCore 中，并没有一个完整浏览器对象，因而缺少相关的DOM API和BOM API。这一区别导致了前端开发非常熟悉的一些库，例如 jQuery、 Zepto 等，在小程序中是无法运行的。同时 JSCore 的环境同 NodeJS 环境也是不尽相同，所以一些 NPM 的包在小程序中也是无法运行的。小程序中没有DOM操作。</span><br><span class="line"></span><br><span class="line">网页开发者需要面对的环境是各式各样的浏览器，PC 端需要面对 IE、Chrome、QQ浏览器等，在移动端需要面对Safari、Chrome以及 iOS、Android 系统中的各式 WebView 。而小程序开发过程中需要面对的是两大操作系统 iOS 和 Android 的微信客户端，以及用于辅助开发的小程序开发者工具，小程序中三大运行环境也是有所区别的，如表1-1所示。</span><br></pre></td></tr></table></figure>

<h5 id="4-2-尺寸单位"><a href="#4-2-尺寸单位" class="headerlink" title="4.2 尺寸单位"></a>4.2 尺寸单位</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">rpx（responsive pixel）: 可以根据屏幕宽度进行自适应。规定屏幕宽为750rpx。如在 iPhone6 上，屏幕宽度为375px，共有750个物理像素，则750rpx &#x3D; 375px &#x3D; 750物理像素，1rpx &#x3D; 0.5px &#x3D; 1物理像素。</span><br><span class="line">设备	rpx换算px (屏幕宽度&#x2F;750)	px换算rpx (750&#x2F;屏幕宽度)</span><br><span class="line">iPhone5	1rpx &#x3D; 0.42px	1px &#x3D; 2.34rpx</span><br><span class="line">iPhone6	1rpx &#x3D; 0.5px	1px &#x3D; 2rpx</span><br><span class="line">iPhone6 Plus	1rpx &#x3D; 0.552px	1px &#x3D; 1.81rpx</span><br><span class="line">建议： 开发微信小程序时设计师可以用 iPhone6 作为视觉稿的标准。</span><br><span class="line">注意： 在较小的屏幕上不可避免的会有一些毛刺，请在开发时尽量避免这种情况。</span><br></pre></td></tr></table></figure>

<h5 id="4-3-样式导入"><a href="#4-3-样式导入" class="headerlink" title="4.3 样式导入"></a>4.3 样式导入</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@import &#39;[路径].wxss&#39;;   &#x2F;*必须以分号结束，不能使用link导入*&#x2F;</span><br></pre></td></tr></table></figure>

<h5 id="4-4-可以使用的标签"><a href="#4-4-可以使用的标签" class="headerlink" title="4.4 可以使用的标签"></a>4.4 可以使用的标签</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scroll-view swiper view(相当于div) icon progress rich-text(富文本) button checkbox editor form input label picker radio slider switch textarea navigator(相当于a) audio video image(相当于img) camera map canvas navigation-bar text(相当于p) block</span><br></pre></td></tr></table></figure>

<p>注意：单标签必须闭合，否则会报错！！！没有link、style、script等标签不能使用！</p>
<h5 id="4-5-小程序代码构成"><a href="#4-5-小程序代码构成" class="headerlink" title="4.5 小程序代码构成"></a>4.5 小程序代码构成</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">.js:逻辑处理</span><br><span class="line">.json:静态数据，属于配置文件</span><br><span class="line">.wxml:页面结构，相当html文件</span><br><span class="line">.wxss:页面布局，相当于css</span><br></pre></td></tr></table></figure>

<h5 id="4-6-数据类型"><a href="#4-6-数据类型" class="headerlink" title="4.6 数据类型"></a>4.6 数据类型</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">WXS 语言目前共有以下几种数据类型：</span><br><span class="line">&#96;number&#96; ： 数值</span><br><span class="line">&#96;string&#96; ：字符串</span><br><span class="line">&#96;boolean&#96;：布尔值</span><br><span class="line">&#96;object&#96;：对象</span><br><span class="line">&#96;function&#96;：函数</span><br><span class="line">&#96;array&#96; : 数组</span><br><span class="line">&#96;date&#96;：日期</span><br><span class="line">&#96;regexp&#96;：正则</span><br></pre></td></tr></table></figure>

<h4 id="5-项目文件夹说明"><a href="#5-项目文件夹说明" class="headerlink" title="5.项目文件夹说明　　"></a>5.项目文件夹说明　　</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">pages:存放项目页面文件,一般一个目录对应一个页面。</span><br><span class="line">utils:存放工具函数（一般是自己封装）</span><br><span class="line">全局配置文件：	</span><br><span class="line">    app.js:全局的逻辑处理</span><br><span class="line">    app.json:(1)页面文件路径设置(2)窗口外观设置(3)设置&#x2F;添加tabbar(底部&#x2F;顶部导航)(4)小程序内搜索，开发者可以通过 &#96;sitemap.json&#96; 配置，或者管理后台页面收录开关来配置其小程序页面是否允许微信索引微信索引</span><br><span class="line">    app.wxss:全局样式</span><br><span class="line">    project.config.json:项目配置文件</span><br><span class="line">    sitemap.json:小程序内搜索，开发者可以通过 &#96;sitemap.json&#96; 配置，或者管理后台页面收录开关来配置其小程序页面是否允许微信索引</span><br></pre></td></tr></table></figure>

<h4 id="6-全局窗口设置"><a href="#6-全局窗口设置" class="headerlink" title="6.全局窗口设置"></a>6.全局窗口设置</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&quot;window&quot;: &#123;</span><br><span class="line">    &quot;backgroundTextStyle&quot;: &quot;light&quot;,  下拉刷新的颜色</span><br><span class="line">    &quot;navigationBarBackgroundColor&quot;: &quot;#fff&quot;,标题栏背景色</span><br><span class="line">    &quot;navigationBarTitleText&quot;: &quot;WeChat&quot;,标题栏标题</span><br><span class="line">    &quot;navigationBarTextStyle&quot;: &quot;black&quot; 标题栏文字颜色</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>

<h4 id="7-导航栏如果放在顶部，是不必加图的，如果加图，图不会显示出来。"><a href="#7-导航栏如果放在顶部，是不必加图的，如果加图，图不会显示出来。" class="headerlink" title="7.导航栏如果放在顶部，是不必加图的，如果加图，图不会显示出来。"></a>7.导航栏如果放在顶部，是不必加图的，如果加图，图不会显示出来。</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&quot;tabBar&quot;: &#123;</span><br><span class="line">    &quot;position&quot;:&quot;bottom&quot;,</span><br><span class="line">    &quot;list&quot;: [</span><br><span class="line">      &#123;</span><br><span class="line">        &quot;pagePath&quot;: &quot;pages&#x2F;home&#x2F;home&quot;,</span><br><span class="line">        &quot;text&quot;: &quot;首页&quot;</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        &quot;pagePath&quot;: &quot;pages&#x2F;list&#x2F;list&quot;,</span><br><span class="line">        &quot;text&quot;: &quot;榜单&quot;</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        &quot;pagePath&quot;: &quot;pages&#x2F;mine&#x2F;mine&quot;,</span><br><span class="line">        &quot;text&quot;: &quot;我的&quot;</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<h4 id="8-上线说明"><a href="#8-上线说明" class="headerlink" title="8.上线说明"></a>8.上线说明</h4><p>　　&gt;   不能超过2MB，所以图片文件和数据及后台代码最好挂到服务器上（使用CDN）。</p>
<p>　　&gt;   如果微信小程序要上线，必须要将要请求的接口的网址写到到后台的开发-&gt;开发设置-&gt;服务器域名-&gt;request合法域名。（注意：只支持https协议）</p>
<h4 id="9-复制快捷键"><a href="#9-复制快捷键" class="headerlink" title="9.复制快捷键"></a>9.复制快捷键</h4><p>　　向下：Alt+Shift+向下光标键</p>
<p>　　向上：Alt+Shift+向上光标键</p>
<h4 id="10-豆瓣API"><a href="#10-豆瓣API" class="headerlink" title="10.豆瓣API:"></a>10.豆瓣API:</h4><p>​    域名：<a href="http://t.yushu.im" target="_blank" rel="noopener">http://t.yushu.im</a></p>
<pre><code>最近上映：/v2/movie/coming_soon
热门电影：/v2/movie/in_theaters
Top250电影：/v2/movie/top250
电影详情：/v2/movie/subject
电影搜索：/v2/movie/search

参数：?start=0&amp;count=20</code></pre><h4 id="11-图标使用"><a href="#11-图标使用" class="headerlink" title="11.图标使用"></a>11.图标使用</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;icon type&#x3D;&quot;success&quot; size&#x3D;&quot;20&quot;&#x2F;&gt;</span><br><span class="line">&lt;icon type&#x3D;&quot;search&quot; size&#x3D;&quot;10&quot;&#x2F;&gt;</span><br><span class="line"></span><br><span class="line">type:</span><br><span class="line">	success, success_no_circle, info, warn, waiting, cancel, download, search, clear</span><br></pre></td></tr></table></figure>

<h4 id="12-创建目录结构"><a href="#12-创建目录结构" class="headerlink" title="12.创建目录结构"></a>12.创建目录结构</h4><p><img src="/2020/02/24/05_%E5%9C%A8%E7%BA%BF%E5%BD%B1%E8%AF%84(%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91)/directory.jpg" alt></p>
<h4 id="13-轮播使用"><a href="#13-轮播使用" class="headerlink" title="13.轮播使用"></a>13.轮播使用</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;swiper </span><br><span class="line">  indicator-dots&#x3D;&quot;true&quot; </span><br><span class="line">  autoplay&#x3D;&quot;true&quot;</span><br><span class="line">  interval&#x3D;&quot;3000&quot;</span><br><span class="line">  duration&#x3D;&quot;1000&quot;</span><br><span class="line">  indicator-color&#x3D;&quot;rgba(255,255,255,.7)&quot;</span><br><span class="line">  indicator-active-color&#x3D;&quot;blue&quot;&gt;</span><br><span class="line">  &lt;block wx:for&#x3D;&quot;&#123;&#123;imgUrls&#125;&#125;&quot; wx:for-item&#x3D;&quot;list&quot; wx:for-index&#x3D;&quot;idx&quot;&gt;</span><br><span class="line">    &lt;swiper-item&gt;</span><br><span class="line">      &lt;image src&#x3D;&quot;&#123;&#123;list&#125;&#125;&quot; class&#x3D;&quot;slide-image&quot; &#x2F;&gt;</span><br><span class="line">    &lt;&#x2F;swiper-item&gt;</span><br><span class="line">  &lt;&#x2F;block&gt;</span><br><span class="line">&lt;&#x2F;swiper&gt;</span><br></pre></td></tr></table></figure>

<p>　　备注：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">indicator-dots&#x3D;&quot;true&quot; -&gt; 添加计数器</span><br><span class="line">autoplay&#x3D;&quot;true&quot;  -&gt; 是否为自动轮播</span><br><span class="line">interval&#x3D;&quot;3000&quot;  -&gt; 轮播切换时间</span><br><span class="line">duration&#x3D;&quot;1000&quot;  -&gt; 每张图切换时间</span><br><span class="line">indicator-color&#x3D;&quot;rgba(255,255,255,.7)&quot;  -&gt; 计数器颜色</span><br><span class="line">indicator-active-color&#x3D;&quot;blue&quot;  -&gt; 当前计数器颜色</span><br></pre></td></tr></table></figure>

<h4 id="14-首页-首页布局"><a href="#14-首页-首页布局" class="headerlink" title="14.[首页]首页布局"></a>14.[首页]首页布局</h4><p>　　home.wxml</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">&lt;view class&#x3D;&quot;header&quot;&gt;</span><br><span class="line">	&lt;view class&#x3D;&quot;search&quot;&gt;</span><br><span class="line">		&lt;icon type&#x3D;&quot;search&quot; size&#x3D;&#39;10&#39;&gt;&lt;&#x2F;icon&gt; 搜索</span><br><span class="line">	&lt;&#x2F;view&gt;</span><br><span class="line">&lt;&#x2F;view&gt;</span><br><span class="line">&lt;!-- 轮播图 --&gt;</span><br><span class="line">&lt;swiper</span><br><span class="line">  indicator-dots&#x3D;&quot;false&quot;</span><br><span class="line">  autoplay&#x3D;&quot;true&quot;</span><br><span class="line">  interval&#x3D;&quot;3000&quot;</span><br><span class="line">  duration&#x3D;&quot;1000&quot;</span><br><span class="line">  indicator-color&#x3D;&quot;rgba(255,255,255,.7)&quot;</span><br><span class="line">  indicator-active-color&#x3D;&quot;red&quot;</span><br><span class="line">  circular&#x3D;&quot;true&quot;</span><br><span class="line">  easing-function&#x3D;&quot;linear&quot;&gt;</span><br><span class="line">  &lt;block wx:for&#x3D;&quot;&#123;&#123;swiperList&#125;&#125;&quot; wx:key&#x3D;&quot;&#123;&#123; item.id &#125;&#125;&quot;&gt;</span><br><span class="line">    &lt;swiper-item&gt;</span><br><span class="line">      &lt;image src&#x3D;&quot;&#123;&#123; item.imgUrl &#125;&#125;&quot; class&#x3D;&quot;slide-image&quot; &#x2F;&gt;</span><br><span class="line">    &lt;&#x2F;swiper-item&gt;</span><br><span class="line">  &lt;&#x2F;block&gt;</span><br><span class="line">&lt;&#x2F;swiper&gt;</span><br><span class="line">&lt;view class&#x3D;&quot;wrapper&quot;&gt;</span><br><span class="line">	&lt;view class&#x3D;&quot;movies&quot; wx:for&#x3D;&quot;&#123;&#123; movies &#125;&#125;&quot; wx:key&#x3D;&quot;&#123;&#123; index &#125;&#125;&quot;&gt;</span><br><span class="line">		&lt;view class&#x3D;&quot;movies-title&quot;&gt;</span><br><span class="line">			&lt;view&gt;&#123;&#123; item.title &#125;&#125;&lt;&#x2F;view&gt;</span><br><span class="line">			&lt;view class&#x3D;&quot;more&quot; bindtap&#x3D;&quot;toMore&quot; data-title&#x3D;&quot;&#123;&#123; item.title &#125;&#125;&quot;&gt;</span><br><span class="line">				更多&lt;text class&#x3D;&quot;iconfont iconxiangyoujiantou&quot;&gt;&lt;&#x2F;text&gt;</span><br><span class="line">			&lt;&#x2F;view&gt;</span><br><span class="line">		&lt;&#x2F;view&gt;</span><br><span class="line">		&lt;view class&#x3D;&quot;movies-list&quot;&gt;</span><br><span class="line">			&lt;scroll-view scroll-x&gt;</span><br><span class="line">				&lt;view class&#x3D;&quot;movies-item&quot;</span><br><span class="line">					  bindtap&#x3D;&quot;toDetails&quot;</span><br><span class="line">					  data-id&#x3D;&quot;&#123;&#123; list.id &#125;&#125;&quot;</span><br><span class="line">					  wx:for&#x3D;&quot;&#123;&#123; item.list &#125;&#125;&quot;</span><br><span class="line">					  wx:for-item&#x3D;&quot;list&quot;</span><br><span class="line">					  wx:for-index&#x3D;&quot;idx&quot;</span><br><span class="line">					  wx:key&#x3D;&quot;&#123;&#123; idx &#125;&#125;&quot;</span><br><span class="line">				&gt;</span><br><span class="line">					&lt;image src&#x3D;&quot;&#123;&#123; list.images.large &#125;&#125;&quot;&gt;&lt;&#x2F;image&gt;</span><br><span class="line">					&lt;view class&#x3D;&quot;movie-name&quot;&gt;&#123;&#123; list.title &#125;&#125;&lt;&#x2F;view&gt;</span><br><span class="line">					&lt;view class&#x3D;&quot;rating&quot;&gt;</span><br><span class="line">						&lt;image src&#x3D;&quot;&#x2F;images&#x2F;star1.png&quot;&#x2F;&gt;</span><br><span class="line">                		&lt;image src&#x3D;&quot;&#x2F;images&#x2F;star2.png&quot;&#x2F;&gt;</span><br><span class="line">                		&lt;image src&#x3D;&quot;&#x2F;images&#x2F;star3.png&quot;&#x2F;&gt;</span><br><span class="line">					&lt;&#x2F;view&gt;</span><br><span class="line">				&lt;&#x2F;view&gt;</span><br><span class="line">			&lt;&#x2F;scroll-view&gt;</span><br><span class="line">		&lt;&#x2F;view&gt;</span><br><span class="line">	&lt;&#x2F;view&gt;</span><br><span class="line">&lt;&#x2F;view&gt;</span><br></pre></td></tr></table></figure>

<p>　　home.wxss</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">@import &#39;..&#x2F;..&#x2F;iconfont.wxss&#39;;</span><br><span class="line">.header&#123;</span><br><span class="line">	background:#42bd56;</span><br><span class="line">	padding:20rpx 30rpx;</span><br><span class="line">&#125;</span><br><span class="line">.search&#123;</span><br><span class="line">	background:#ffffff;</span><br><span class="line">	text-align:center;</span><br><span class="line">	border-radius:10rpx;</span><br><span class="line">	font-size:28rpx;</span><br><span class="line">	color:#ccc;</span><br><span class="line">	padding:10rpx 0;</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;* 轮播图 *&#x2F;</span><br><span class="line">.slide-image &#123;</span><br><span class="line">  width: 100%;</span><br><span class="line">  height: 250rpx;</span><br><span class="line">&#125;</span><br><span class="line">swiper &#123;</span><br><span class="line">  height: 110px;</span><br><span class="line">&#125;</span><br><span class="line">.movies-title&#123;</span><br><span class="line">	display: flex;</span><br><span class="line">	justify-content:space-between;</span><br><span class="line">	padding: 20rpx 30rpx;</span><br><span class="line">	font-size: 28rpx;</span><br><span class="line">&#125;</span><br><span class="line">.movies-title&gt;view&#123;</span><br><span class="line">  font-weight: bold;</span><br><span class="line">&#125;</span><br><span class="line">.movies-list&#123;</span><br><span class="line">	padding: 20rpx;</span><br><span class="line">	white-space: nowrap;</span><br><span class="line">&#125;</span><br><span class="line">.movies-item&#123;</span><br><span class="line">  	width: 200rpx;</span><br><span class="line">	display: inline-block;</span><br><span class="line">	margin-right: 15rpx;</span><br><span class="line">	text-align: center;</span><br><span class="line">&#125;</span><br><span class="line">.more&#123;</span><br><span class="line">	color:#42bd56;</span><br><span class="line">&#125;</span><br><span class="line">.more&gt;text&#123;</span><br><span class="line">	font-weight: bold;</span><br><span class="line">	font-size: 32rpx;</span><br><span class="line">&#125;</span><br><span class="line">.movies-item&gt;image&#123;</span><br><span class="line">	width: 200rpx;</span><br><span class="line">	height: 284rpx;</span><br><span class="line">  border-radius: 10rpx;</span><br><span class="line">&#125;</span><br><span class="line">.movie-name&#123;</span><br><span class="line">  font-size: 28rpx;</span><br><span class="line">  white-space: nowrap;</span><br><span class="line">  text-overflow:ellipsis;</span><br><span class="line">  overflow: hidden;</span><br><span class="line">&#125;</span><br><span class="line">.rating&#123;</span><br><span class="line">	display: inline-block;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="17-utils-请求的工具函数的封装"><a href="#17-utils-请求的工具函数的封装" class="headerlink" title="17.[utils]请求的工具函数的封装"></a>17.[utils]请求的工具函数的封装</h4><p>　　第一步：在utils下创建js文件，书写要封装的函数，最后要抛出。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">function request(url,callback)&#123;</span><br><span class="line">  wx.request(&#123;</span><br><span class="line">    url: url,</span><br><span class="line">    success:function(res)&#123;</span><br><span class="line">      callback(res.data);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">module.exports &#x3D; &#123;</span><br><span class="line">  request</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>　　第二步：使用工具函数</p>
<p>　　1）引入</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">let http &#x3D; require(&#39;..&#x2F;..&#x2F;utils&#x2F;http.js&#39;);</span><br></pre></td></tr></table></figure>

<p>　　2）使用工具函数发请求</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">onLoad: function (options) &#123;</span><br><span class="line">    let str &#x3D; app.globalData.movies;</span><br><span class="line"></span><br><span class="line">    http.request(str.url + str.coming_soon,this.getComing)</span><br><span class="line">&#125;,</span><br><span class="line">getComing(res)&#123;</span><br><span class="line">	console.log(res.subjects)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="18-utils-多个请求工具函数的封装，并将结果存入一个对象变量中"><a href="#18-utils-多个请求工具函数的封装，并将结果存入一个对象变量中" class="headerlink" title="18.[utils]多个请求工具函数的封装，并将结果存入一个对象变量中"></a>18.[utils]多个请求工具函数的封装，并将结果存入一个对象变量中</h4><p>　　1）工具函数的封装</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">function getHttp(url,key,title,callback)&#123;</span><br><span class="line">  wx.request(&#123;</span><br><span class="line">    url: url,</span><br><span class="line">    success: function (res) &#123;</span><br><span class="line">      callback(res.data,title, key);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line">module.exports &#x3D; &#123;</span><br><span class="line">  getHttp</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>　　2）调用</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">http.getHttp(str.url + str.coming_soon, &#39;coming_soon&#39;, &#39;影院热映&#39;, this.getMovies);</span><br><span class="line">http.getHttp(str.url + str.in_theaters, &#39;in_theaters&#39;, &#39;热门电影&#39;, this.getMovies);</span><br><span class="line">http.getHttp(str.url + str.top250, &#39;top250&#39;, &#39;Top250&#39;, this.getMovies);</span><br></pre></td></tr></table></figure>

<p>　　3）定义数据变量</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">data: &#123;</span><br><span class="line">    movies:&#123;</span><br><span class="line">      coming_soon:&#39;&#39;,</span><br><span class="line">      in_theaters:&#39;&#39;,</span><br><span class="line">      top250:&#39;&#39;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>　　4）回调函数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">getMovies(res, title, key)&#123;</span><br><span class="line">    &#x2F;&#x2F;console.log(res.subjects, title, key);</span><br><span class="line">    this.data.movies[key] &#x3D; &#123;</span><br><span class="line">      title:title,</span><br><span class="line">      list:res.subjects</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    this.setData(&#123;</span><br><span class="line">      movies: this.data.movies</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>　　5）前端渲染</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;view class&#x3D;&quot;wrapper&quot;&gt;</span><br><span class="line">	&lt;view class&#x3D;&quot;movies&quot; wx:for&#x3D;&quot;&#123;&#123; movies &#125;&#125;&quot; wx:key&#x3D;&quot;&#123;&#123; index &#125;&#125;&quot;&gt;</span><br><span class="line">		&lt;view class&#x3D;&quot;movies-title&quot;&gt;</span><br><span class="line">			&lt;view&gt;&#123;&#123; item.title &#125;&#125;&lt;&#x2F;view&gt;</span><br><span class="line">			&lt;view class&#x3D;&quot;more&quot;&gt;</span><br><span class="line">				更多&lt;text class&#x3D;&quot;iconfont iconxiangyoujiantou&quot;&gt;&lt;&#x2F;text&gt;</span><br><span class="line">			&lt;&#x2F;view&gt;</span><br><span class="line">		&lt;&#x2F;view&gt;</span><br><span class="line">		&lt;view class&#x3D;&quot;movies-list&quot;&gt;</span><br><span class="line">			&lt;scroll-view scroll-x&gt;</span><br><span class="line">			&lt;view class&#x3D;&quot;movies-item&quot; wx:for&#x3D;&quot;&#123;&#123; item.list &#125;&#125;&quot; wx:for-item&#x3D;&quot;list&quot; wx:for-index&#x3D;&quot;idx&quot; wx:key&#x3D;&quot;&#123;&#123; idx &#125;&#125;&quot;&gt;</span><br><span class="line">				&lt;image src&#x3D;&quot;&#123;&#123; list.images.large &#125;&#125;&quot;&gt;&lt;&#x2F;image&gt;</span><br><span class="line">				&lt;view class&#x3D;&quot;movie-name&quot;&gt;&#123;&#123; list.title &#125;&#125;&lt;&#x2F;view&gt;</span><br><span class="line">				&lt;view class&#x3D;&quot;rating&quot; wx:for&#x3D;&quot;&#123;&#123;[1,2,3,34,6]&#125;&#125;&quot;&gt;</span><br><span class="line">					&lt;image src&#x3D;&quot;..&#x2F;..&#x2F;images&#x2F;star1.png&quot;&gt;&lt;&#x2F;image&gt;</span><br><span class="line">				&lt;&#x2F;view&gt;</span><br><span class="line">        		&lt;text&gt;&#123;&#123; list.rating.average &#125;&#125;&lt;&#x2F;text&gt;</span><br><span class="line">			&lt;&#x2F;view&gt;		</span><br><span class="line">			&lt;&#x2F;scroll-view&gt;</span><br><span class="line">		&lt;&#x2F;view&gt;</span><br><span class="line">	&lt;&#x2F;view&gt;</span><br><span class="line">&lt;&#x2F;view&gt;</span><br></pre></td></tr></table></figure>

<h4 id="19-模板-模板定义和使用"><a href="#19-模板-模板定义和使用" class="headerlink" title="19.[模板]模板定义和使用"></a>19.[模板]模板定义和使用</h4><p>　　第一步：</p>
<p>　　创建模板文件</p>
<p><img src="/2020/02/24/05_%E5%9C%A8%E7%BA%BF%E5%BD%B1%E8%AF%84(%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91)/moban.png" alt></p>
<p>　　第二步：书写模板内容</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;template name&#x3D;&quot;stars&quot;&gt;</span><br><span class="line">    &lt;!--&#123;&#123; list.rating.stars &#125;&#125;--&gt;</span><br><span class="line">    &lt;view class&#x3D;&quot;stars&quot;&gt;</span><br><span class="line">        &lt;view wx:if&#x3D;&quot;&#123;&#123; list.rating.stars &#x3D;&#x3D; &#39;00&#39; &#125;&#125;&quot;&gt;暂无评分&lt;&#x2F;view&gt;</span><br><span class="line">        &lt;view wx:else&gt;</span><br><span class="line">            &lt;view class&#x3D;&quot;stars-list&quot; wx:for&#x3D;&quot;&#123;&#123;[1,2,3,4,5]&#125;&#125;&quot; wx:for-item&#x3D;&quot;i&quot; wx:key&#x3D;&quot;&#123;&#123; index &#125;&#125;&quot;&gt;</span><br><span class="line">                &lt;image wx:if&#x3D;&quot;&#123;&#123; list.rating.stars &#x2F; 10 &gt;&#x3D; index + 1 &#125;&#125;&quot; src&#x3D;&quot;&#x2F;images&#x2F;star1.png&quot;&#x2F;&gt;</span><br><span class="line">                &lt;image wx:elif&#x3D;&quot;&#123;&#123; list.rating.stars &#x2F; 10 &gt;&#x3D; index &amp;&amp; list.rating.stars % 10 !&#x3D; 0 &#125;&#125;&quot; src&#x3D;&quot;&#x2F;images&#x2F;star2.png&quot;&#x2F;&gt;</span><br><span class="line">                &lt;image wx:else src&#x3D;&quot;&#x2F;images&#x2F;star3.png&quot;&#x2F;&gt;</span><br><span class="line">            &lt;&#x2F;view&gt;</span><br><span class="line">            &lt;text class&#x3D;&quot;rating-score&quot;&gt;&#123;&#123; list.rating.average &#125;&#125;&lt;&#x2F;text&gt;</span><br><span class="line">        &lt;&#x2F;view&gt;</span><br><span class="line">    &lt;&#x2F;view&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br></pre></td></tr></table></figure>

<p>　　提示：微信小程序中的模板可以有多个根目录。</p>
<p>　　第三步：写模板样式</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">.stars&#123;</span><br><span class="line">  font-size: 24rpx;</span><br><span class="line">  color:#ccc;</span><br><span class="line">&#125;</span><br><span class="line">.stars-list&#123;</span><br><span class="line">  display: inline-block;</span><br><span class="line">&#125;</span><br><span class="line">.stars-list&gt;image&#123;</span><br><span class="line">    width: 20rpx;</span><br><span class="line">    height: 20rpx;</span><br><span class="line">&#125;</span><br><span class="line">.rating-score&#123;</span><br><span class="line">  font-size: 24rpx;</span><br><span class="line">  color:#ccc;</span><br><span class="line">  margin-left: 20rpx;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>　　第四步：引入模板文件和样式</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 在home.wxml中添加 --&gt;</span><br><span class="line">&lt;import src&#x3D;&quot;&#x2F;template&#x2F;stars.wxml&quot; &#x2F;&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;* 在home.wxss中添加，引入时以home.wxss文件所在位置为参照，而不是以template文件夹所在位置为参照 *&#x2F;</span><br><span class="line">@import &#39;..&#x2F;..&#x2F;template&#x2F;stars.wxss&#39;;</span><br></pre></td></tr></table></figure>

<p>　　第五步：使用模板</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;template is&#x3D;&quot;stars&quot; data&#x3D;&quot;&#123;&#123; list &#125;&#125;&quot;&#x2F;&gt;</span><br></pre></td></tr></table></figure>

<p>　　提示：用自定义标签data来完成传值。</p>
<h4 id="20-首页-首页跳转到详情页面并传值，然后发请求"><a href="#20-首页-首页跳转到详情页面并传值，然后发请求" class="headerlink" title="20.[首页]首页跳转到详情页面并传值，然后发请求"></a>20.[首页]首页跳转到详情页面并传值，然后发请求</h4><p>　　第一步：绑定事件并传值</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;view class&#x3D;&quot;movies-list&quot;&gt;</span><br><span class="line">    &lt;scroll-view scroll-x&gt;</span><br><span class="line">        &lt;view class&#x3D;&quot;movies-item&quot; bindtap&#x3D;&quot;toDetails&quot; data-id&#x3D;&quot;&#123;&#123; list.id &#125;&#125;&quot; wx:for&#x3D;&quot;&#123;&#123; item.list &#125;&#125;&quot; wx:for-item&#x3D;&quot;list&quot; wx:for-index&#x3D;&quot;idx&quot; wx:key&#x3D;&quot;&#123;&#123; idx &#125;&#125;&quot;&gt;</span><br><span class="line">            &lt;image src&#x3D;&quot;&#123;&#123; list.images.large &#125;&#125;&quot;&gt;&lt;&#x2F;image&gt;</span><br><span class="line">            &lt;view class&#x3D;&quot;movie-name&quot;&gt;&#123;&#123; list.title &#125;&#125;&lt;&#x2F;view&gt;</span><br><span class="line">            &lt;view class&#x3D;&quot;rating&quot;&gt;</span><br><span class="line">            	&lt;template is&#x3D;&quot;stars&quot; data&#x3D;&quot;&#123;&#123; list &#125;&#125;&quot;&#x2F;&gt;</span><br><span class="line">            &lt;&#x2F;view&gt;</span><br><span class="line">        &lt;&#x2F;view&gt;</span><br><span class="line">    &lt;&#x2F;scroll-view&gt;</span><br><span class="line">&lt;&#x2F;view&gt;</span><br></pre></td></tr></table></figure>

<p>　　第二步：定义事件方法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">toDetails(e)&#123;</span><br><span class="line">    let id &#x3D; e.currentTarget.dataset.id;</span><br><span class="line">    wx.navigateTo(&#123;</span><br><span class="line">      url:&quot;&#x2F;pages&#x2F;details&#x2F;details?id&#x3D;&quot; + id</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>　　第三步：在详情页面发请求</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">let app &#x3D; getApp();</span><br><span class="line">let http &#x3D; require(&#39;..&#x2F;..&#x2F;utils&#x2F;http&#39;);</span><br><span class="line">Page(&#123;</span><br><span class="line">  data:&#123;</span><br><span class="line">    moviesDetails:&#123;&#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  onLoad:function (options) &#123;</span><br><span class="line">    let id &#x3D; options.id;&#x2F;&#x2F;接收路由传过来的值</span><br><span class="line">    let str &#x3D; app.globalData.movies;&#x2F;&#x2F;取全局变量的值</span><br><span class="line">    http.request(str.url + str.subject + &#39;&#x2F;&#39; + id,this.getDetails);&#x2F;&#x2F; 利用封装的工具函数发请求</span><br><span class="line">  &#125;,</span><br><span class="line">  getDetails(res)&#123;&#x2F;&#x2F; 请求回调处理</span><br><span class="line">    &#x2F;&#x2F;console.log(res);</span><br><span class="line">    this.setData(&#123;&#x2F;&#x2F;将请求的结果存入data设定的变量中，用于前端数据渲染</span><br><span class="line">      moviesDetails:res</span><br><span class="line">    &#125;);</span><br><span class="line">    console.log(this.data.moviesDetails);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="21-详情页面-动态改变标题"><a href="#21-详情页面-动态改变标题" class="headerlink" title="21.[详情页面]动态改变标题"></a>21.[详情页面]动态改变标题</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">getDetails(res)&#123;</span><br><span class="line">    this.setData(&#123;</span><br><span class="line">      moviesDetails:res</span><br><span class="line">    &#125;);</span><br><span class="line">    </span><br><span class="line">    &#x2F;&#x2F; 动态改变标题</span><br><span class="line">    wx.setNavigationBarTitle(&#123;</span><br><span class="line">      title: this.data.moviesDetails.title</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<h4 id="22-详情页面-添加Loading"><a href="#22-详情页面-添加Loading" class="headerlink" title="22.[详情页面]添加Loading"></a>22.[详情页面]添加Loading</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">getDetails(res)&#123;</span><br><span class="line">	&#x2F;&#x2F; 显示Loading</span><br><span class="line">    wx.showLoading(&#123;</span><br><span class="line">      title: &#39;加载中...&#39;,</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    this.setData(&#123;</span><br><span class="line">      moviesDetails:res</span><br><span class="line">    &#125;);</span><br><span class="line">    wx.setNavigationBarTitle(&#123;</span><br><span class="line">      title: this.data.moviesDetails.title</span><br><span class="line">    &#125;);</span><br><span class="line">    </span><br><span class="line">	&#x2F;&#x2F; Loading隐藏</span><br><span class="line">    setTimeout(function () &#123;</span><br><span class="line">      wx.hideLoading()</span><br><span class="line">    &#125;, 1500)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<h4 id="23-添加进度条"><a href="#23-添加进度条" class="headerlink" title="23.添加进度条"></a>23.添加进度条</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;progress percent&#x3D;&#123;&#123; 变量名或表达式 &#125;&#125; color&#x3D;&quot;进度条配色&quot; &#x2F;&gt;</span><br></pre></td></tr></table></figure>

<h4 id="24-首页-gt-more页面-单击“更多“跳转到more页面，并发请求"><a href="#24-首页-gt-more页面-单击“更多“跳转到more页面，并发请求" class="headerlink" title="24.[首页-&gt;more页面]单击“更多“跳转到more页面，并发请求"></a>24.[首页-&gt;more页面]单击“更多“跳转到more页面，并发请求</h4><p>　　home.wxml</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;view class&#x3D;&quot;more&quot; bindtap&#x3D;&quot;toMore&quot; data-title&#x3D;&quot;&#123;&#123; item.title &#125;&#125;&quot;&gt;</span><br></pre></td></tr></table></figure>

<p><img src="/2020/02/24/05_%E5%9C%A8%E7%BA%BF%E5%BD%B1%E8%AF%84(%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91)/toMore.png" alt></p>
<p>　　home.js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">toMore(e)&#123;</span><br><span class="line">    let title &#x3D; e.currentTarget.dataset.title;</span><br><span class="line">    wx.navigateTo(&#123;</span><br><span class="line">      url:&quot;&#x2F;pages&#x2F;more&#x2F;more?title&#x3D;&quot; + title  &#x2F;&#x2F; 跳转并传值</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>　　新建more目录，并在more.js写如下代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">let app &#x3D; getApp();</span><br><span class="line">let http &#x3D; require(&#39;..&#x2F;..&#x2F;utils&#x2F;http&#39;);</span><br><span class="line">Page(&#123;</span><br><span class="line">  data:&#123;</span><br><span class="line">    allMore:[],</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line">  onLoad:function (options) &#123;</span><br><span class="line">    let title &#x3D; options.title;</span><br><span class="line">    let api &#x3D; app.globalData.movies;</span><br><span class="line">    let httpStr &#x3D; &#39;&#39;;</span><br><span class="line">    switch (title)&#123;</span><br><span class="line">      case &#39;影院热映&#39; : httpStr &#x3D; api.url + api.coming_soon;break;</span><br><span class="line">      case &#39;热门电影&#39; : httpStr &#x3D; api.url + api.in_theaters;break;</span><br><span class="line">      case &#39;Top250&#39; : httpStr &#x3D; api.url + api.top250;</span><br><span class="line">    &#125;</span><br><span class="line">    http.request(httpStr,this.getMore)</span><br><span class="line">  &#125;,</span><br><span class="line">  getMore(data)&#123;</span><br><span class="line">    this.setData(&#123;</span><br><span class="line">      allMore:data.subjects</span><br><span class="line">    &#125;);</span><br><span class="line">    console.log(this.data.allMore)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="25-more页面-单击”more”页面的电影，跳转到详情页面"><a href="#25-more页面-单击”more”页面的电影，跳转到详情页面" class="headerlink" title="25.[more页面]单击”more”页面的电影，跳转到详情页面"></a>25.[more页面]单击”more”页面的电影，跳转到详情页面</h4><p>　　more.wxml</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;view</span><br><span class="line">    class&#x3D;&#39;more-item&#39;</span><br><span class="line">    wx:for&#x3D;&#39;&#123;&#123;allMore&#125;&#125;&#39;</span><br><span class="line">    wx:for-item&#x3D;&quot;list&quot;</span><br><span class="line">    wx:key&#x3D;&quot;&#123;&#123;index&#125;&#125;&quot;</span><br><span class="line">    bindtap&#x3D;&quot;toDetail&quot;</span><br><span class="line">    data-id&#x3D;&quot;&#123;&#123; list.id &#125;&#125;&quot;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>

<p><img src="/2020/02/24/05_%E5%9C%A8%E7%BA%BF%E5%BD%B1%E8%AF%84(%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91)/more.png" alt></p>
<p>　　more.js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">toDetail(e)&#123;</span><br><span class="line">    let id &#x3D; e.currentTarget.dataset.id;</span><br><span class="line">    wx.navigateTo(&#123;</span><br><span class="line">      url:&quot;&#x2F;pages&#x2F;details&#x2F;details?id&#x3D;&quot; +id</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<h4 id="26-more页面-动态改变标题"><a href="#26-more页面-动态改变标题" class="headerlink" title="26.[more页面]动态改变标题"></a>26.[more页面]动态改变标题</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wx.setNavigationBarTitle(&#123;</span><br><span class="line">	title: this.data.title</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><img src="/2020/02/24/05_%E5%9C%A8%E7%BA%BF%E5%BD%B1%E8%AF%84(%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91)/morejs.png" alt></p>
<h4 id="27-more页面-上拉加载更多"><a href="#27-more页面-上拉加载更多" class="headerlink" title="27.[more页面]上拉加载更多"></a>27.[more页面]上拉加载更多</h4><p>　　more.wxml</p>
<p><img src="/2020/02/24/05_%E5%9C%A8%E7%BA%BF%E5%BD%B1%E8%AF%84(%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91)/loadmorewxml.png" alt></p>
<p>　　more.wxss</p>
<p><img src="/2020/02/24/05_%E5%9C%A8%E7%BA%BF%E5%BD%B1%E8%AF%84(%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91)/loadmorewxss.png" alt></p>
<p>　　more.js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">let app &#x3D; getApp();</span><br><span class="line">let http &#x3D; require(&#39;..&#x2F;..&#x2F;utils&#x2F;http&#39;);</span><br><span class="line">Page(&#123;</span><br><span class="line">  data:&#123;</span><br><span class="line">    allMore:[],</span><br><span class="line">    title:&#39;&#39;,</span><br><span class="line">    httpStr:&#39;&#39;,</span><br><span class="line">    start:0,</span><br><span class="line">    reqCount:20</span><br><span class="line">  &#125;,</span><br><span class="line">  onLoad:function (options) &#123;</span><br><span class="line">    let title &#x3D; options.title;</span><br><span class="line">    let api &#x3D; app.globalData.movies;</span><br><span class="line">    let httpStr &#x3D; &#39;&#39;;</span><br><span class="line">    this.setData(&#123;</span><br><span class="line">      title:title</span><br><span class="line">    &#125;);</span><br><span class="line">    switch (title)&#123;</span><br><span class="line">      case &#39;影院热映&#39; : httpStr &#x3D; api.url + api.coming_soon;break;</span><br><span class="line">      case &#39;热门电影&#39; : httpStr &#x3D; api.url + api.in_theaters;break;</span><br><span class="line">      case &#39;Top250&#39; : httpStr &#x3D; api.url + api.top250;</span><br><span class="line">    &#125;</span><br><span class="line">    this.setData(&#123;</span><br><span class="line">      httpStr:httpStr</span><br><span class="line">    &#125;);</span><br><span class="line">    &#x2F;&#x2F; 显示loading</span><br><span class="line">    wx.showLoading(&#123;</span><br><span class="line">      title: &#39;加载中...&#39;,</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    http.request(httpStr,this.getMore);</span><br><span class="line">    &#x2F;&#x2F; 动态改变标题</span><br><span class="line">    wx.setNavigationBarTitle(&#123;</span><br><span class="line">      title: this.data.title</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    setTimeout(function () &#123;</span><br><span class="line">      wx.hideLoading()</span><br><span class="line">    &#125;, 1000)</span><br><span class="line">  &#125;,</span><br><span class="line">  getMore(data)&#123;</span><br><span class="line">    let tmpMore &#x3D; [];</span><br><span class="line">    if(this.data.start &gt; 0)&#123;</span><br><span class="line">      tmpMore &#x3D; this.data.allMore.concat(data.subjects);&#x2F;&#x2F;concat合并数组</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">      tmpMore &#x3D; data.subjects</span><br><span class="line">    &#125;</span><br><span class="line">    this.data.start +&#x3D; this.data.reqCount;</span><br><span class="line">    this.setData(&#123;</span><br><span class="line">      allMore:tmpMore</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">  loadMore()&#123;</span><br><span class="line">    let url &#x3D; this.data.httpStr + &#39;?start&#x3D;&#39; + this.data.start + &#39;&amp;count&#x3D;&#39; + this.data.reqCount;</span><br><span class="line"></span><br><span class="line">    wx.showLoading(&#123;</span><br><span class="line">      title: &#39;请稍等...&#39;,</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    http.request(url,this.getMore);</span><br><span class="line"></span><br><span class="line">    setTimeout(function () &#123;</span><br><span class="line">      wx.hideLoading()</span><br><span class="line">    &#125;, 1000)</span><br><span class="line">  &#125;,</span><br><span class="line">  &#x2F;&#x2F; 跳转到详情页面</span><br><span class="line">  toDetail(e)&#123;</span><br><span class="line">    let id &#x3D; e.currentTarget.dataset.id;</span><br><span class="line">    wx.navigateTo(&#123;</span><br><span class="line">      url:&quot;&#x2F;pages&#x2F;details&#x2F;details?id&#x3D;&quot; +id</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="28-搜索页面-搜索"><a href="#28-搜索页面-搜索" class="headerlink" title="28.[搜索页面]搜索"></a>28.[搜索页面]搜索</h4><p>　　头部布局（搜索结果布局自己添加）</p>
<p>　　search.wxml</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;view class&#x3D;&quot;header&quot;&gt;</span><br><span class="line">    &lt;view class&#x3D;&quot;search&quot;&gt;</span><br><span class="line">        &lt;icon type&#x3D;&quot;search&quot; size&#x3D;&#39;10&#39;&gt;&lt;&#x2F;icon&gt;</span><br><span class="line">        &lt;input placeholder&#x3D;&quot;搜索&quot; bindinput&#x3D;&quot;search&quot; &#x2F;&gt;</span><br><span class="line">    &lt;&#x2F;view&gt;</span><br><span class="line">&lt;&#x2F;view&gt;</span><br><span class="line">&lt;view class&#x3D;&quot;movies-list&quot;&gt;</span><br><span class="line">    ...</span><br><span class="line">&lt;&#x2F;view&gt;</span><br></pre></td></tr></table></figure>

<p>　　search.wxss</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">.header&#123;</span><br><span class="line">  background:#42bd56;</span><br><span class="line">  padding:20rpx 30rpx;</span><br><span class="line">&#125;</span><br><span class="line">.search&#123;</span><br><span class="line">  display: flex;</span><br><span class="line">  font-size:28rpx;</span><br><span class="line">  padding:10rpx 0;</span><br><span class="line">  position: relative;</span><br><span class="line">&#125;</span><br><span class="line">.search icon&#123;</span><br><span class="line">  position: absolute;</span><br><span class="line">  top:28rpx;</span><br><span class="line">  left:15rpx;</span><br><span class="line">&#125;</span><br><span class="line">.search input&#123;</span><br><span class="line">  width: 100%;</span><br><span class="line">  border-radius:10rpx;</span><br><span class="line">  background-color: #fff;</span><br><span class="line">  padding-left: 40rpx;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>　　search.js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">let app &#x3D; getApp();</span><br><span class="line">let http &#x3D; require(&#39;..&#x2F;..&#x2F;utils&#x2F;http&#39;);</span><br><span class="line">Page(&#123;</span><br><span class="line">  data:&#123;</span><br><span class="line">    searchRs:[]</span><br><span class="line">  &#125;,</span><br><span class="line">  search(e)&#123;</span><br><span class="line">    &#x2F;&#x2F;console.log(e);</span><br><span class="line">    let val &#x3D; e.detail.value;</span><br><span class="line">    let api &#x3D; app.globalData.movies;</span><br><span class="line">    http.request(api.url + api.search + &#39;?q&#x3D;&#39; + val,this.getSearch)</span><br><span class="line">  &#125;,</span><br><span class="line">  getSearch(res)&#123;</span><br><span class="line">    console.log(res.subjects);</span><br><span class="line">    this.setData(&#123;</span><br><span class="line">      searchRs:res.subjects</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="29-搜索页面-静态添加搜索标题"><a href="#29-搜索页面-静态添加搜索标题" class="headerlink" title="29.[搜索页面]静态添加搜索标题"></a>29.[搜索页面]静态添加搜索标题</h4><p>　　search.json</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;navigationBarTitleText&quot;: &quot;搜索&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>29.真机测试</p>
<p>　　1）代码上传。</p>
<p><img src="/2020/02/24/05_%E5%9C%A8%E7%BA%BF%E5%BD%B1%E8%AF%84(%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91)/upload.png" alt></p>
<p>　　2）进入小程序后台可以选择添加体验或开发成员。</p>
<p><img src="/2020/02/24/05_%E5%9C%A8%E7%BA%BF%E5%BD%B1%E8%AF%84(%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91)/adddev01.png" alt></p>
<p><img src="/2020/02/24/05_%E5%9C%A8%E7%BA%BF%E5%BD%B1%E8%AF%84(%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91)/adddev02.png" alt></p>
<p>　　3）真机体验。</p>
<p><img src="/2020/02/24/05_%E5%9C%A8%E7%BA%BF%E5%BD%B1%E8%AF%84(%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91)/test.png" alt></p>
<p>　　注：真机体验时可能看不到请求到的数据，要把可调试打开，并可以添加到桌面。</p>
<h4 id="30-跳转"><a href="#30-跳转" class="headerlink" title="30.跳转"></a>30.跳转</h4><p>1）静态跳转</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;navigator url&#x3D;&quot;&quot;&gt;提示内容&lt;&#x2F;navigator&gt;   &lt;!-- 相当于a标签 --&gt;</span><br></pre></td></tr></table></figure>

<p>2）动态跳转</p>
<p>a.跳转到指定页面</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">toPlay()&#123;</span><br><span class="line">  wx.navigateTo(&#123;</span><br><span class="line">    url: &#39;&#x2F;pages&#x2F;play&#x2F;play&#39;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>b.跳转到选项卡</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">toHome()&#123;</span><br><span class="line">    wx.switchTab(&#123;</span><br><span class="line">      url: &#39;&#x2F;pages&#x2F;home&#x2F;home&#39;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<h4 id="31-体验后的问题"><a href="#31-体验后的问题" class="headerlink" title="31.体验后的问题"></a>31.体验后的问题</h4><p>　　体验后发现安卓手机的标题不居中，而苹果手机可以居中，解决方案：</p>
<p>　　在app.json的”window”中添加：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;navigationStyle&quot;:&quot;custom&quot;</span><br></pre></td></tr></table></figure>

<p>　　<img src="/2020/02/24/05_%E5%9C%A8%E7%BA%BF%E5%BD%B1%E8%AF%84(%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91)/custom.png" alt></p>
<p>　　同时在需要添加标题的页面自行布局标题，且不能使用类似</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wx.setNavigationBarTitle(&#123;</span><br><span class="line">	title: this.data.moviesDetails.title</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>　　不能用上面的代码去实现动态改变标题，而要用数据单向绑定去设置标题。</p>
<h4 id="32-在阿里云上布https协议的后台接口"><a href="#32-在阿里云上布https协议的后台接口" class="headerlink" title="32.在阿里云上布https协议的后台接口"></a>32.在阿里云上布https协议的后台接口</h4><p>1）在aliyun后台购买ssl证书</p>
<p>2）将ssl证书绑定到域名上</p>
<p>3）下载证书（如果是node，下载支持Nginx的证书）</p>
<p>4）将证书复制到阿里云后台，并将扩展名为.pem的改为.crt。</p>
<p>5）在后台创建如下文件夹和文件：</p>
<p><img src="/2020/02/24/05_%E5%9C%A8%E7%BA%BF%E5%BD%B1%E8%AF%84(%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91)/yg01.png" alt></p>
<p>6）data.js文件的内容参考如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">var https &#x3D; require(&#39;https&#39;);</span><br><span class="line">var fs &#x3D; require(&#39;fs&#39;);</span><br><span class="line">const options &#x3D; &#123;</span><br><span class="line">    key: fs.readFileSync(&#39;.&#x2F;module&#x2F;3043388_www.hspstudio.club.key&#39;),</span><br><span class="line">    cert: fs.readFileSync(&#39;.&#x2F;module&#x2F;3043388_www.hspstudio.club.crt&#39;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 创建一个服务器对象</span><br><span class="line">var server &#x3D; https.createServer(options);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 通过事件监听request事件</span><br><span class="line"></span><br><span class="line">server.on(&#39;request&#39;,(req,res)&#x3D;&gt;&#123;</span><br><span class="line">    fs.readFile(&#39;.&#x2F;data&#x2F;top250.json&#39;,(err,data)&#x3D;&gt;&#123;</span><br><span class="line">        if(err)&#123;</span><br><span class="line">            throw err</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">            res.writeHead(300,&#123;</span><br><span class="line">                &quot;Content-Type&quot;:&quot;text&#x2F;plain;charset&#x3D;utf-8&quot;,</span><br><span class="line">                &quot;Access-Control-Allow-Origin&quot;:&quot;*&quot;</span><br><span class="line">            &#125;)</span><br><span class="line">            res.write(data);</span><br><span class="line">            res.end();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 监听端口设置</span><br><span class="line">server.listen(443,&#39;0.0.0.0&#39;,()&#x3D;&gt;&#123;</span><br><span class="line">    console.log(&#39;服务器已启动！&#39;);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>7）前端接口测试</p>
<p><img src="/2020/02/24/05_%E5%9C%A8%E7%BA%BF%E5%BD%B1%E8%AF%84(%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91)/yg02.png" alt></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://harrison258.github.io/2020/02/24/05_%E5%9C%A8%E7%BA%BF%E5%BD%B1%E8%AF%84(%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91)/" data-id="ck71fnuvz0001m0ib9sso51bt" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/">下一页 &amp;raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">二月 2020</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/02/24/04_%E4%BA%91%E8%B0%B7%E6%97%85%E6%B8%B8(Vue+Stylus+%E5%90%8E%E5%8F%B0)%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91/">04_云谷旅游(Vue+Stylus+后台)项目开发</a>
          </li>
        
          <li>
            <a href="/2020/02/24/01_Yogo%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%EF%BC%88PC%E7%AB%AF%E7%94%B5%E5%95%86%E7%BD%91%E7%AB%99%EF%BC%89/">01_Yogo项目开发（PC端电商网站）</a>
          </li>
        
          <li>
            <a href="/2020/02/24/03_%E9%94%A6%E6%9B%BC%E5%95%86%E5%9F%8E%EF%BC%88mpvue+WeUI+%E5%90%8E%E5%8F%B0%EF%BC%89/">03_锦曼商城（mpvue+WeUI+后台）</a>
          </li>
        
          <li>
            <a href="/2020/02/24/05_%E5%9C%A8%E7%BA%BF%E5%BD%B1%E8%AF%84(%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91)/">05_在线影评(小程序原生开发)</a>
          </li>
        
          <li>
            <a href="/2020/02/24/02_%E7%82%B9%E9%A4%90APP%E5%BC%80%E5%8F%91%EF%BC%88Vue+ES6+Vuex%E7%AD%89%EF%BC%89/">02_点餐APP开发（Vue+ES6+Vuex等）</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 - 2020 版权归侯仕平所有，并提供技术支持！未经授权，不得商用！<br>
      微信公众号： <a href="###" target="_blank">web前端开发</a>
      个人网站： <a href="http://www.hspstudio.club" target="_blank">http(s)://www.hspstudio.club</a>（说明：如果网站打不开，可能该网站在用于其它测试）
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">首页</a>
  
    <a href="/archives" class="mobile-nav-link">全部条目</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>